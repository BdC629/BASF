(function($){Drupal.behaviors.devconnect_monetization_rate_plan_form={attach:function(context){var settings=Drupal.settings.devconnect_monetization_rate_plan_form;$("input.date").datepicker();if(settings.date_format==="d-m-Y"){$("input.date").datepicker("option","dateFormat","dd-mm-yy")}else{$("input.date").datepicker("option","dateFormat","mm/dd/yy")}if($(".tabbable .nav-tabs a.plan-tab[data-toggle='tab']").length==0){var selected_plan_id=$("input[name='plan_options']:first").val();var action=settings.active_plan_id===null||settings.active_plan_id===undefined||settings.active_plan_id!==null&&settings.active_plan_ends_today?"purchase":"cancel";var oppositeAction=action=="cancel"?"purchase":"cancel";$("input[name='action'][value='"+action+"']").prop("checked",true);$("input[name='plan_options']:first").prop("checked",true);$("span#action_title_wrapper").html(settings.action_title_wrapper[action]);$("p."+action).show();$("p."+oppositeAction).hide();$("strong."+action).show();$("strong."+oppositeAction).hide();$("span#plan_name_wrapper").html(settings.product_specific_plan_name);$("input#edit-start-date").val(settings.select_date_tip[action]);$("#edit-"+action+".btn.form-submit").show();$("#edit-"+oppositeAction+".btn.form-submit").hide();if(settings.date_limits==undefined){return}var date_limit=settings.date_limits[selected_plan_id].min_date;$("input.date").datepicker("option","minDate",new Date(date_limit.year,date_limit.month-1,date_limit.day));date_limit=settings.date_limits[selected_plan_id].max_date;if(date_limit!=undefined){$("input.date").datepicker("option","maxDate",new Date(date_limit.year,date_limit.month-1,date_limit.day))}}$(".tabbable .nav-tabs a.plan-tab[data-toggle='tab']").on("show.bs.tab",function(e){var href=$(this).attr("href");var formAction=$("form#devconnect-monetization-plan-form").attr("action");if(formAction.indexOf("#")>0){formAction=formAction.substring(0,formAction.indexOf("#"))}$("form#devconnect-monetization-plan-form").attr("action",formAction+href);$("a.accept.plan.requirement").each(function(){var requirementUrl=$(this).attr("href");if(requirementUrl.indexOf("%23")>0){requirementUrl=requirementUrl.substring(0,requirementUrl.indexOf("%23"))}$(this).attr("href",requirementUrl+"%23"+encodeURI(href.substring(1)))});var selected_plan_id=$(this).attr("plan-id");$("input[name='plan_options'][value='"+selected_plan_id+"']").prop("checked",true);var action=selected_plan_id==settings.active_plan_id&&!settings.active_plan_ends_today?"cancel":"purchase";var oppositeAction=action=="cancel"?"purchase":"cancel";$("input[name='action'][value='"+action+"']").prop("checked",true);$("span#action_title_wrapper").html(settings.action_title_wrapper[action]);$("p."+action).show();$("p."+oppositeAction).hide();$("strong."+action).show();$("strong."+oppositeAction).hide();var planName=$(this).html();var futurePlanSpanPos=planName.indexOf("<span");planName=futurePlanSpanPos<0?planName:planName.substring(0,futurePlanSpanPos-1).trim();$("span#plan_name_wrapper").html(planName);$("input#edit-start-date").val(settings.select_date_tip[action]);$("#edit-"+action+".btn.form-submit").show();$("#edit-"+oppositeAction+".btn.form-submit").hide();var tab_id_selector=$(this).attr("href");if(settings.date_limits==undefined){return}var date_limit=settings.date_limits[selected_plan_id].min_date;$("input.date").datepicker("option","minDate",new Date(date_limit.year,date_limit.month-1,date_limit.day));date_limit=settings.date_limits[selected_plan_id].max_date;if(date_limit!=undefined){$("input.date").datepicker("option","maxDate",new Date(date_limit.year,date_limit.month-1,date_limit.day))}if($("div.tab-content.plans-comparison div"+tab_id_selector).find("li.active a[plan-version]").attr("plan-version")=="future"){$("div.purchase-plan.well").hide()}else{$("div.purchase-plan.well").show()}});$("a[data-toggle][plan-version]").on("show.bs.tab",function(e){if($(this).attr("plan-version")=="future"){$("div.purchase-plan.well").hide()}else{$("div.purchase-plan.well").show()}});if($("input[name='plan_options']:checked").length==0){$(".tabbable .nav-tabs a.plan-tab[data-toggle='tab']:eq(0)").tab("show")}else{var index=$("input[name='plan_options']").index($("input[name='plan_options']:checked"));$(".tabbable .nav-tabs a.plan-tab[data-toggle='tab']:eq("+index+")").trigger("show.bs.tab")}}}})(jQuery);