(function(){var e="scaytcheck",b="checkspell",d="";function a(l,k){var j=0,i;for(i in k){if(k[i]==l){j=1;break}}return j}var c=function(){var l=this;var o=function(v){if(typeof f.instances[l.name]!="undefined"||f.instances[l.name]!=null){return}var u=l.config;var r={};if(l.editable().$.nodeName=="BODY"){r.srcNodeRef=l.document.getWindow().$.frameElement}else{r.srcNodeRef=l.editable().$}r.assocApp="CKEDITOR."+CKEDITOR.version+"@"+CKEDITOR.revision;r.customerid=u.scayt_customerid||"1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2";r.customDictionaryIds=u.scayt_customDictionaryIds||"";r.userDictionaryName=u.scayt_userDictionaryName||"";r.sLang=u.scayt_sLang||"en_US";r.onLoad=function(){if(!(CKEDITOR.env.ie&&CKEDITOR.env.version<8)){this.addStyle(this.selectorCss(),"padding-bottom: 2px !important;")}if(l.editable().hasFocus&&!f.isControlRestored(l)){this.focus()}};var w=window.scayt_custom_params;if(typeof w=="object"){for(var t in w){r[t]=w[t]}}if(f.getControlId(l)){r.id=f.getControlId(l)}var y=new window.scayt(r);y.afterMarkupRemove.push(function(z){new CKEDITOR.dom.element(z,y.document).mergeSiblings()});var s=f.instances[l.name];if(s){y.sLang=s.sLang;y.option(s.option());y.paused=s.paused}f.instances[l.name]=y;try{y.setDisabled(f.isPaused(l)===false)}catch(x){}l.fire("showScaytState")};function m(){l.once("focus",o);l.once("blur",p)}function p(u){var s=u.editor,r=f.getScayt(s),t=s.elementMode==CKEDITOR.ELEMENT_MODE_INLINE;if(!r){return}f.setPaused(s,!r.disabled);f.setControlId(s,r.id);r.destroy(true);delete f.instances[s.name];if(t){m()}}l.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?m():l.on("contentDom",o);l.on("contentDomUnload",function(){var r=CKEDITOR.document.getElementsByTag("script"),v=/^dojoIoScript(\d+)$/i,t=/^https?:\/\/svc\.webspellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i;for(var u=0;u<r.count();u++){var s=r.getItem(u),x=s.getId(),w=s.getAttribute("src");if(x&&w&&x.match(v)&&w.match(t)){s.remove()}}});l.on("beforeCommandExec",function(r){if(r.data.name=="source"&&l.mode=="source"){f.markControlRestore(l)}});l.on("afterCommandExec",function(r){if(!f.isScaytEnabled(l)){return}if(l.mode=="wysiwyg"&&(r.data.name=="undo"||r.data.name=="redo")){f.getScayt(l).setDisabled(true);if(f.refresh_timeout){window.clearTimeout(f.refresh_timeout)}f.refresh_timeout=window.setTimeout(function(){f.getScayt(l).setDisabled(false);f.getScayt(l).focus();f.getScayt(l).refresh()},10)}});l.on("destroy",p);l.on("setData",p);l.on("insertElement",function(){var r=f.getScayt(l);if(f.isScaytEnabled(l)){if(CKEDITOR.env.ie){l.getSelection().unlock(true)}window.setTimeout(function(){r.focus();r.refresh()},10)}},this,null,50);l.on("insertHtml",function(){var r=f.getScayt(l);if(f.isScaytEnabled(l)){if(CKEDITOR.env.ie){l.getSelection().unlock(true)}window.setTimeout(function(){r.focus();r.refresh()},10)}},this,null,50);l.on("scaytDialog",function(r){r.data.djConfig=window.djConfig;r.data.scayt_control=f.getScayt(l);r.data.tab=d;r.data.scayt=window.scayt});var q=l.dataProcessor,i=q&&q.htmlFilter;if(i){i.addRules({elements:{span:function(r){if(r.attributes["data-scayt_word"]&&r.attributes["data-scaytid"]){delete r.name;return r}}}})}var n=CKEDITOR.plugins.undo.Image.prototype;var k=typeof n.equalsContent=="function"?"equalsContent":"equals";n[k]=CKEDITOR.tools.override(n[k],function(r){return function(v){var u=this.contents,w=v.contents;var t=f.getScayt(this.editor);if(t&&f.isScaytReady(this.editor)){this.contents=t.reset(u)||"";v.contents=t.reset(w)||""}var s=r.apply(this,arguments);this.contents=u;v.contents=w;return s}});var j=CKEDITOR.editor.prototype;j.checkDirty=CKEDITOR.tools.override(j.checkDirty,function(r){return function(){var s=null,u=f.getScayt(this);if(u&&f.isScaytReady(this)){var v=u.reset(this.getSnapshot());var t=u.reset(this._.previousValue);s=v!==t}else{s=r.apply(this)}return s}});if(l.document&&(l.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE||l.focusManager.hasFocus)){o()}};CKEDITOR.plugins.scayt={engineLoaded:false,instances:{},controlInfo:{},setControlInfo:function(j,k){if(j&&j.name&&typeof this.controlInfo[j.name]!="object"){this.controlInfo[j.name]={}}for(var i in k){this.controlInfo[j.name][i]=k[i]}},isControlRestored:function(i){if(i&&i.name&&this.controlInfo[i.name]){return this.controlInfo[i.name].restored}return false},markControlRestore:function(i){this.setControlInfo(i,{restored:true})},setControlId:function(i,j){this.setControlInfo(i,{id:j})},getControlId:function(i){if(i&&i.name&&this.controlInfo[i.name]&&this.controlInfo[i.name].id){return this.controlInfo[i.name].id}return null},setPaused:function(j,i){this.setControlInfo(j,{paused:i})},isPaused:function(i){if(i&&i.name&&this.controlInfo[i.name]){return this.controlInfo[i.name].paused}return undefined},getScayt:function(i){return this.instances[i.name]},isScaytReady:function(i){return this.engineLoaded===true&&"undefined"!==typeof window.scayt&&this.getScayt(i)},isScaytEnabled:function(j){var i=this.getScayt(j);return i?i.disabled===false:false},getUiTabs:function(l){var m=[];var j=l.config.scayt_uiTabs||"1,1,1";j=j.split(",");j[3]="1";for(var k=0;k<4;k++){m[k]=typeof window.scayt!="undefined"&&typeof window.scayt.uiTags!="undefined"?parseInt(j[k],10)&&window.scayt.uiTags[k]:parseInt(j[k],10)}if(typeof l.plugins.wsc=="object"){m.push(1)}else{m.push(0)}return m},loadEngine:function(j){if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900||CKEDITOR.env.opera||CKEDITOR.env.air){return j.fire("showScaytState")}if(this.engineLoaded===true){return c.apply(j)}else{if(this.engineLoaded==-1){return CKEDITOR.on("scaytReady",function(){c.apply(j)})}}CKEDITOR.on("scaytReady",c,j);CKEDITOR.on("scaytReady",function(){this.engineLoaded=true},this,null,0);this.engineLoaded=-1;var m=document.location.protocol;m=m.search(/https?:/)!=-1?m:"http:";var k="svc.webspellchecker.net/scayt26/loader__base.js";var i=j.config.scayt_srcUrl||m+"//"+k;var l=f.parseUrl(i).path+"/";if(window.scayt==undefined){CKEDITOR._djScaytConfig={baseUrl:l,addOnLoad:[function(){CKEDITOR.fireOnce("scaytReady")}],isDebug:false};CKEDITOR.document.getHead().append(CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",async:"true",src:i}}))}else{CKEDITOR.fireOnce("scaytReady")}return null},parseUrl:function(j){var i;if(j.match&&(i=j.match(/(.*)[\/\\](.*?\.\w+)$/))){return{path:i[1],file:i[2]}}else{return j}}};var f=CKEDITOR.plugins.scayt;var g=function(m,i,n,l,o,k,j){m.addCommand(l,o);m.addMenuItem(l,{label:n,command:l,group:k,order:j})};var h={preserveState:true,editorFocus:false,canUndo:false,exec:function(j){if(f.isScaytReady(j)){var i=f.isScaytEnabled(j);this.setState(i?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_ON);var k=f.getScayt(j);k.focus();k.setDisabled(i)}else{if(!j.config.scayt_autoStartup&&f.engineLoaded>=0){j.focus();this.setState(CKEDITOR.TRISTATE_DISABLED);f.loadEngine(j)}}}};CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en-au,en-ca,en-gb,en,eo,es,et,eu,fa,fi,fo,fr-ca,fr,gl,gu,he,hi,hr,hu,is,it,ja,ka,km,ko,lt,lv,mk,mn,ms,nb,nl,no,pl,pt-br,pt,ro,ru,sk,sl,sr-latn,sr,sv,th,tr,ug,uk,vi,zh-cn,zh",icons:"scayt",hidpi:true,beforeInit:function(k){var j=k.config.scayt_contextMenuItemsOrder||"suggest|moresuggest|control",i="";j=j.split("|");if(j&&j.length){for(var l=0;l<j.length;l++){i+="scayt_"+j[l]+(j.length!=parseInt(l,10)+1?",":"")}}k.config.menu_groups=i+","+k.config.menu_groups},checkEnvironment:function(){return CKEDITOR.env.opera||CKEDITOR.env.air?0:1},init:function(m){var s=this;var i=m.dataProcessor&&m.dataProcessor.dataFilter;var t={elements:{span:function(v){var u=v.attributes;if(u&&u["data-scaytid"]){delete v.name}}}};i&&i.addRules(t);var n={},q={};var l=m.addCommand(e,h);CKEDITOR.dialog.add(e,CKEDITOR.getUrl(this.path+"dialogs/options.js"));var r=f.getUiTabs(m);var k="scaytButton";m.addMenuGroup(k);m.addMenuGroup("scayt_suggest",-10);m.addMenuGroup("scayt_moresuggest",-9);m.addMenuGroup("scayt_control",-8);var o={};var j=m.lang.scayt;o.scaytToggle={label:j.enable,command:e,group:k};if(r[0]==1){o.scaytOptions={label:j.options,group:k,onClick:function(){d="options";m.openDialog(e)}}}if(r[1]==1){o.scaytLangs={label:j.langs,group:k,onClick:function(){d="langs";m.openDialog(e)}}}if(r[2]==1){o.scaytDict={label:j.dictionariesTab,group:k,onClick:function(){d="dictionaries";m.openDialog(e)}}}o.scaytAbout={label:m.lang.scayt.about,group:k,onClick:function(){d="about";m.openDialog(e)}};if(r[4]==1){o.scaytWSC={label:m.lang.wsc.toolbar,group:k,command:b}}m.addMenuItems(o);m.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:j.title,title:CKEDITOR.env.opera?j.opera_title:j.title,modes:{wysiwyg:s.checkEnvironment()},toolbar:"spellchecker,20",onRender:function(){l.on("state",function(){this.setState(l.state)},this)},onMenu:function(){var u=f.isScaytEnabled(m);m.getMenuItem("scaytToggle").label=j[u?"disable":"enable"];var v=f.getUiTabs(m);return{scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:u&&v[0]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:u&&v[1]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:u&&v[2]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:u&&v[3]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytWSC:v[4]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}});if(m.contextMenu&&m.addMenuItems){m.contextMenu.addListener(function(x,O){if(!f.isScaytEnabled(m)||O.getRanges()[0].checkReadOnly()){return null}var B=f.getScayt(m),F=B.getScaytNode();if(!F){return null}var L=B.getWord(F);if(!L){return null}var A=B.getLang(),M={},v=m.config.scayt_contextCommands||"all",J=window.scayt.getSuggestion(L,A);v=v.split("|");for(var G in n){delete m._.menuItems[G];delete m.commands[G]}for(G in q){delete m._.menuItems[G];delete m.commands[G]}if(!J||!J.length){var C={exec:function(){}};g(m,"no_sugg",j.noSuggestions,"scayt_no_sugg",C,"scayt_control",1,true);q.scayt_no_sugg=CKEDITOR.TRISTATE_OFF}else{n={};q={};var w=m.config.scayt_moreSuggestions||"on";var y=false;var z=m.config.scayt_maxSuggestions;typeof z!="number"&&(z=5);!z&&(z=J.length);for(var K=0,I=J.length;K<I;K+=1){var u="scayt_suggestion_"+J[K].replace(" ","_");var H=function(Q,P){return{exec:function(){B.replace(Q,P)}}}(F,J[K]);if(K<z){g(m,"button_"+u,J[K],u,H,"scayt_suggest",K+1);M[u]=CKEDITOR.TRISTATE_OFF;q[u]=CKEDITOR.TRISTATE_OFF}else{if(w=="on"){g(m,"button_"+u,J[K],u,H,"scayt_moresuggest",K+1);n[u]=CKEDITOR.TRISTATE_OFF;y=true}}}if(y){m.addMenuItem("scayt_moresuggest",{label:j.moreSuggestions,group:"scayt_moresuggest",order:10,getItems:function(){return n}});q.scayt_moresuggest=CKEDITOR.TRISTATE_OFF}}if(a("all",v)||a("ignore",v)){var D={exec:function(){B.ignore(F)}};g(m,"ignore",j.ignore,"scayt_ignore",D,"scayt_control",2);q.scayt_ignore=CKEDITOR.TRISTATE_OFF}if(a("all",v)||a("ignoreall",v)){var N={exec:function(){B.ignoreAll(F)}};g(m,"ignore_all",j.ignoreAll,"scayt_ignore_all",N,"scayt_control",3);q.scayt_ignore_all=CKEDITOR.TRISTATE_OFF}if(a("all",v)||a("add",v)){var E={exec:function(){window.scayt.addWordToUserDictionary(F)}};g(m,"add_word",j.addWord,"scayt_add_word",E,"scayt_control",4);q.scayt_add_word=CKEDITOR.TRISTATE_OFF}if(B.fireOnContextMenu){B.fireOnContextMenu(m)}return q})}var p=function(u){u.removeListener();if(CKEDITOR.env.opera||CKEDITOR.env.air){l.setState(CKEDITOR.TRISTATE_DISABLED)}else{l.setState(f.isScaytEnabled(m)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};m.on("showScaytState",p);m.on("instanceReady",p);if(m.config.scayt_autoStartup){m.on("instanceReady",function(){f.loadEngine(m)})}},afterInit:function(k){var j,i=function(l){if(l.hasAttribute("data-scaytid")){return false}};if(k._.elementsPath&&(j=k._.elementsPath.filters)){j.push(i)}k.addRemoveFormatFilter&&k.addRemoveFormatFilter(i)}})})();