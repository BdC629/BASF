(function(){var f=CKEDITOR.htmlParser.cssStyle,d=CKEDITOR.tools.cssLength;var e=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i;function a(j,h){var g=e.exec(j),i=e.exec(h);if(g){if(!g[2]&&i[2]=="px"){return i[1]}if(g[2]=="px"&&!i[2]){return i[1]+"px"}}return h}var c={elements:{$:function(k){var j=k.attributes,l=j&&j["data-cke-realelement"],i=l&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(l)),h=i&&i.children[0];if(h&&k.attributes["data-cke-resizable"]){var o=new f(k).rules,m=h.attributes,g=o.width,n=o.height;g&&(m.width=a(m.width,g));n&&(m.height=a(m.height,n))}return h}}};var b=CKEDITOR.plugins.add("fakeobjects",{lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,ug,uk,vi,zh,zh-cn",init:function(g){g.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(h){var g=h.dataProcessor,i=g&&g.htmlFilter;if(i){i.addRules(c)}}});CKEDITOR.editor.prototype.createFakeElement=function(j,m,p,h){var i=this.lang.fakeobjects,n=i[p]||i.unknown;var k={class:m,"data-cke-realelement":encodeURIComponent(j.getOuterHtml()),"data-cke-real-node-type":j.type,alt:n,title:n,align:j.getAttribute("align")||""};if(!CKEDITOR.env.hc){k.src=CKEDITOR.getUrl(b.path+"images/spacer.gif")}if(p){k["data-cke-real-element-type"]=p}if(h){k["data-cke-resizable"]=h;var l=new f;var g=j.getAttribute("width"),o=j.getAttribute("height");g&&(l.rules.width=d(g));o&&(l.rules.height=d(o));l.populate(k)}return this.document.createElement("img",{attributes:k})};CKEDITOR.editor.prototype.createFakeParserElement=function(j,p,s,h){var i=this.lang.fakeobjects,q=i[s]||i.unknown,m;var k=new CKEDITOR.htmlParser.basicWriter;j.writeHtml(k);m=k.getHtml();var l={class:p,"data-cke-realelement":encodeURIComponent(m),"data-cke-real-node-type":j.type,alt:q,title:q,align:j.attributes.align||""};if(!CKEDITOR.env.hc){l.src=CKEDITOR.getUrl(b.path+"images/spacer.gif")}if(s){l["data-cke-real-element-type"]=s}if(h){l["data-cke-resizable"]=h;var n=j.attributes,o=new f;var g=n.width,r=n.height;g!=undefined&&(o.rules.width=d(g));r!=undefined&&(o.rules.height=d(r));o.populate(l)}return new CKEDITOR.htmlParser.element("img",l)};CKEDITOR.editor.prototype.restoreRealElement=function(h){if(h.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT){return null}var i=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(h.data("cke-realelement")),this.document);if(h.data("cke-resizable")){var j=h.getStyle("width"),g=h.getStyle("height");j&&i.setAttribute("width",a(i.getAttribute("width"),j));g&&i.setAttribute("height",a(i.getAttribute("height"),g))}return i}})();