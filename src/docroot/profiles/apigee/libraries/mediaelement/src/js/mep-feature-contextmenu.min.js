(function($){$.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(player){if(typeof player.enterFullScreen=="undefined")return null;if(player.isFullScreen){return mejs.i18n.t("mejs.fullscreen-off")}else{return mejs.i18n.t("mejs.fullscreen-on")}},click:function(player){if(player.isFullScreen){player.exitFullScreen()}else{player.enterFullScreen()}}},{render:function(player){if(player.media.muted){return mejs.i18n.t("mejs.unmute")}else{return mejs.i18n.t("mejs.mute")}},click:function(player){if(player.media.muted){player.setMuted(false)}else{player.setMuted(true)}}},{isSeparator:true},{render:function(player){return mejs.i18n.t("mejs.download-video")},click:function(player){window.location.href=player.media.currentSrc}}]});$.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(player,controls,layers,media){player.contextMenu=$('<div class="mejs-contextmenu"></div>').appendTo($("body")).hide();player.container.bind("contextmenu",function(e){if(player.isContextMenuEnabled){e.preventDefault();player.renderContextMenu(e.clientX-1,e.clientY-1);return false}});player.container.bind("click",function(){player.contextMenu.hide()});player.contextMenu.bind("mouseleave",function(){player.startContextMenuTimer()})},cleancontextmenu:function(player){player.contextMenu.remove()},isContextMenuEnabled:true,enableContextMenu:function(){this.isContextMenuEnabled=true},disableContextMenu:function(){this.isContextMenuEnabled=false},contextMenuTimeout:null,startContextMenuTimer:function(){var t=this;t.killContextMenuTimer();t.contextMenuTimer=setTimeout(function(){t.hideContextMenu();t.killContextMenuTimer()},750)},killContextMenuTimer:function(){var timer=this.contextMenuTimer;if(timer!=null){clearTimeout(timer);delete timer;timer=null}},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(x,y){var t=this,html="",items=t.options.contextMenuItems;for(var i=0,il=items.length;i<il;i++){if(items[i].isSeparator){html+='<div class="mejs-contextmenu-separator"></div>'}else{var rendered=items[i].render(t);if(rendered!=null){html+='<div class="mejs-contextmenu-item" data-itemindex="'+i+'" id="element-'+Math.random()*1e6+'">'+rendered+"</div>"}}}t.contextMenu.empty().append($(html)).css({top:y,left:x}).show();t.contextMenu.find(".mejs-contextmenu-item").each(function(){var $dom=$(this),itemIndex=parseInt($dom.data("itemindex"),10),item=t.options.contextMenuItems[itemIndex];if(typeof item.show!="undefined")item.show($dom,t);$dom.click(function(){if(typeof item.click!="undefined")item.click(t);t.contextMenu.hide()})});setTimeout(function(){t.killControlsTimer("rev3")},100)}})})(mejs.$);