(function($){mejs.MepDefaults={poster:"",showPosterWhenEnded:false,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(media){return media.duration*.05},defaultSeekForwardInterval:function(media){return media.duration*.05},setDimensions:true,audioWidth:-1,audioHeight:-1,startVolume:.8,loop:false,autoRewind:true,enableAutosize:true,timeFormat:"",alwaysShowHours:false,showTimecodeFrameCount:false,framesPerSecond:25,autosizeProgress:true,alwaysShowControls:false,hideVideoControlsOnLoad:false,clickToPlayPause:true,controlsTimeoutDefault:1500,controlsTimeoutMouseEnter:2500,controlsTimeoutMouseLeave:1e3,iPadUseNativeControls:false,iPhoneUseNativeControls:false,AndroidUseNativeControls:false,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:true,stretching:"auto",enableKeyboard:true,pauseOtherPlayers:true,keyActions:[{keys:[32,179],action:function(player,media,key,event){if(!mejs.MediaFeatures.isFirefox){if(media.paused||media.ended){media.play()}else{media.pause()}}}},{keys:[38],action:function(player,media,key,event){player.container.find(".mejs-volume-slider").css("display","block");if(player.isVideo){player.showControls();player.startControlsTimer()}var newVolume=Math.min(media.volume+.1,1);media.setVolume(newVolume)}},{keys:[40],action:function(player,media,key,event){player.container.find(".mejs-volume-slider").css("display","block");if(player.isVideo){player.showControls();player.startControlsTimer()}var newVolume=Math.max(media.volume-.1,0);media.setVolume(newVolume)}},{keys:[37,227],action:function(player,media,key,event){if(!isNaN(media.duration)&&media.duration>0){if(player.isVideo){player.showControls();player.startControlsTimer()}var newTime=Math.max(media.currentTime-player.options.defaultSeekBackwardInterval(media),0);media.setCurrentTime(newTime)}}},{keys:[39,228],action:function(player,media,key,event){if(!isNaN(media.duration)&&media.duration>0){if(player.isVideo){player.showControls();player.startControlsTimer()}var newTime=Math.min(media.currentTime+player.options.defaultSeekForwardInterval(media),media.duration);media.setCurrentTime(newTime)}}},{keys:[70],action:function(player,media,key,event){if(typeof player.enterFullScreen!="undefined"){if(player.isFullScreen){player.exitFullScreen()}else{player.enterFullScreen()}}}},{keys:[77],action:function(player,media,key,event){player.container.find(".mejs-volume-slider").css("display","block");if(player.isVideo){player.showControls();player.startControlsTimer()}if(player.media.muted){player.setMuted(false)}else{player.setMuted(true)}}}]};mejs.mepIndex=0;mejs.players={};mejs.MediaElementPlayer=function(node,o){if(!(this instanceof mejs.MediaElementPlayer)){return new mejs.MediaElementPlayer(node,o)}var t=this;t.$media=t.$node=$(node);t.node=t.media=t.$media[0];if(!t.node){return}if(typeof t.node.player!="undefined"){return t.node.player}if(typeof o=="undefined"){o=t.$node.data("mejsoptions")}t.options=$.extend({},mejs.MepDefaults,o);if(!t.options.timeFormat){t.options.timeFormat="mm:ss";if(t.options.alwaysShowHours){t.options.timeFormat="hh:mm:ss"}if(t.options.showTimecodeFrameCount){t.options.timeFormat+=":ff"}}mejs.Utility.calculateTimeFormat(0,t.options,t.options.framesPerSecond||25);t.id="mep_"+mejs.mepIndex++;mejs.players[t.id]=t;t.init();return t};mejs.MediaElementPlayer.prototype={hasFocus:false,controlsAreVisible:true,init:function(){var t=this,mf=mejs.MediaFeatures,meOptions=$.extend(true,{},t.options,{success:function(media,domNode){t.meReady(media,domNode)},error:function(e){t.handleError(e)}}),tagName=t.media.tagName.toLowerCase();t.isDynamic=tagName!=="audio"&&tagName!=="video";if(t.isDynamic){t.isVideo=t.options.isVideo}else{t.isVideo=tagName!=="audio"&&t.options.isVideo}if(mf.isiPad&&t.options.iPadUseNativeControls||mf.isiPhone&&t.options.iPhoneUseNativeControls){t.$media.attr("controls","controls");if(mf.isiPad&&t.media.getAttribute("autoplay")!==null){t.play()}}else if(mf.isAndroid&&t.options.AndroidUseNativeControls){}else if(t.isVideo||!t.isVideo&&t.options.features.length){t.$media.removeAttr("controls");var videoPlayerTitle=t.isVideo?mejs.i18n.t("mejs.video-player"):mejs.i18n.t("mejs.audio-player");$('<span class="mejs-offscreen">'+videoPlayerTitle+"</span>").insertBefore(t.$media);t.container=$('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svgAsImg?"svg":"no-svg")+'" tabindex="0" role="application" aria-label="'+videoPlayerTitle+'">'+'<div class="mejs-inner">'+'<div class="mejs-mediaelement"></div>'+'<div class="mejs-layers"></div>'+'<div class="mejs-controls"></div>'+'<div class="mejs-clear"></div>'+"</div>"+"</div>").addClass(t.$media[0].className).insertBefore(t.$media).focus(function(e){if(!t.controlsAreVisible&&!t.hasFocus&&t.controlsEnabled){t.showControls(true);if(!t.hasMsNativeFullScreen){var btnSelector=".mejs-playpause-button > button";if(mejs.Utility.isNodeAfter(e.relatedTarget,t.container[0])){btnSelector=".mejs-controls .mejs-button:last-child > button"}var button=t.container.find(btnSelector);button.focus()}}});if(!t.options.features.length){t.container.css("background","transparent").find(".mejs-controls").hide()}if(t.isVideo&&t.options.stretching==="fill"&&!t.container.parent("mejs-fill-container").length){t.outerContainer=t.$media.parent();t.container.wrap('<div class="mejs-fill-container"/>')}t.container.addClass((mf.isAndroid?"mejs-android ":"")+(mf.isiOS?"mejs-ios ":"")+(mf.isiPad?"mejs-ipad ":"")+(mf.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio "));t.container.find(".mejs-mediaelement").append(t.$media);t.node.player=t;t.controls=t.container.find(".mejs-controls");t.layers=t.container.find(".mejs-layers");var tagType=t.isVideo?"video":"audio",capsTagName=tagType.substring(0,1).toUpperCase()+tagType.substring(1);if(t.options[tagType+"Width"]>0||t.options[tagType+"Width"].toString().indexOf("%")>-1){t.width=t.options[tagType+"Width"]}else if(t.media.style.width!==""&&t.media.style.width!==null){t.width=t.media.style.width}else if(t.media.getAttribute("width")!==null){t.width=t.$media.attr("width")}else{t.width=t.options["default"+capsTagName+"Width"]}if(t.options[tagType+"Height"]>0||t.options[tagType+"Height"].toString().indexOf("%")>-1){t.height=t.options[tagType+"Height"]}else if(t.media.style.height!==""&&t.media.style.height!==null){t.height=t.media.style.height}else if(t.$media[0].getAttribute("height")!==null){t.height=t.$media.attr("height")}else{t.height=t.options["default"+capsTagName+"Height"]}t.setPlayerSize(t.width,t.height);meOptions.pluginWidth=t.width;meOptions.pluginHeight=t.height}else if(!t.isVideo&&!t.options.features.length){t.$media.hide()}mejs.MediaElement(t.$media[0],meOptions);if(typeof t.container!=="undefined"&&t.options.features.length&&t.controlsAreVisible){t.container.trigger("controlsshown")}},showControls:function(doAnimation){var t=this;doAnimation=typeof doAnimation=="undefined"||doAnimation;if(t.controlsAreVisible)return;if(doAnimation){t.controls.removeClass("mejs-offscreen").stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true;t.container.trigger("controlsshown")});t.container.find(".mejs-control").removeClass("mejs-offscreen").stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true})}else{t.controls.removeClass("mejs-offscreen").css("display","block");t.container.find(".mejs-control").removeClass("mejs-offscreen").css("display","block");t.controlsAreVisible=true;t.container.trigger("controlsshown")}t.setControlsSize()},hideControls:function(doAnimation){var t=this;doAnimation=typeof doAnimation=="undefined"||doAnimation;if(!t.controlsAreVisible||t.options.alwaysShowControls||t.keyboardAction||t.media.paused||t.media.ended)return;if(doAnimation){t.controls.stop(true,true).fadeOut(200,function(){$(this).addClass("mejs-offscreen").css("display","block");t.controlsAreVisible=false;t.container.trigger("controlshidden")});t.container.find(".mejs-control").stop(true,true).fadeOut(200,function(){$(this).addClass("mejs-offscreen").css("display","block")})}else{t.controls.addClass("mejs-offscreen").css("display","block");t.container.find(".mejs-control").addClass("mejs-offscreen").css("display","block");t.controlsAreVisible=false;t.container.trigger("controlshidden")}},controlsTimer:null,startControlsTimer:function(timeout){var t=this;timeout=typeof timeout!="undefined"?timeout:t.options.controlsTimeoutDefault;t.killControlsTimer("start");t.controlsTimer=setTimeout(function(){t.hideControls();t.killControlsTimer("hide")},timeout)},killControlsTimer:function(src){var t=this;if(t.controlsTimer!==null){clearTimeout(t.controlsTimer);delete t.controlsTimer;t.controlsTimer=null}},controlsEnabled:true,disableControls:function(){var t=this;t.killControlsTimer();t.hideControls(false);this.controlsEnabled=false},enableControls:function(){var t=this;t.showControls(false);t.controlsEnabled=true},meReady:function(media,domNode){var t=this,mf=mejs.MediaFeatures,autoplayAttr=domNode.getAttribute("autoplay"),autoplay=!(typeof autoplayAttr=="undefined"||autoplayAttr===null||autoplayAttr==="false"),featureIndex,feature;if(t.created){return}else{t.created=true}t.media=media;t.domNode=domNode;if(!(mf.isAndroid&&t.options.AndroidUseNativeControls)&&!(mf.isiPad&&t.options.iPadUseNativeControls)&&!(mf.isiPhone&&t.options.iPhoneUseNativeControls)){if(!t.isVideo&&!t.options.features.length){if(autoplay&&media.pluginType=="native"){t.play()}if(t.options.success){if(typeof t.options.success=="string"){window[t.options.success](t.media,t.domNode,t)}else{t.options.success(t.media,t.domNode,t)}}return}t.buildposter(t,t.controls,t.layers,t.media);t.buildkeyboard(t,t.controls,t.layers,t.media);t.buildoverlays(t,t.controls,t.layers,t.media);t.findTracks();for(featureIndex in t.options.features){feature=t.options.features[featureIndex];if(t["build"+feature]){try{t["build"+feature](t,t.controls,t.layers,t.media)}catch(e){console.log("error building "+feature);console.log(e)}}}t.container.trigger("controlsready");t.setPlayerSize(t.width,t.height);t.setControlsSize();if(t.isVideo){if(mejs.MediaFeatures.hasTouch&&!t.options.alwaysShowControls){t.$media.bind("touchstart",function(){if(t.controlsAreVisible){t.hideControls(false)}else{if(t.controlsEnabled){t.showControls(false)}}})}else{t.clickToPlayPauseCallback=function(){if(t.options.clickToPlayPause){if(t.media.paused){t.play()}else{t.pause()}var button=t.$media.closest(".mejs-container").find(".mejs-overlay-button"),pressed=button.attr("aria-pressed");button.attr("aria-pressed",!pressed)}};t.media.addEventListener("click",t.clickToPlayPauseCallback,false);t.container.bind("mouseenter",function(){if(t.controlsEnabled){if(!t.options.alwaysShowControls){t.killControlsTimer("enter");t.showControls();t.startControlsTimer(t.options.controlsTimeoutMouseEnter)}}}).bind("mousemove",function(){if(t.controlsEnabled){if(!t.controlsAreVisible){t.showControls()}if(!t.options.alwaysShowControls){t.startControlsTimer(t.options.controlsTimeoutMouseEnter)}}}).bind("mouseleave",function(){if(t.controlsEnabled){if(!t.media.paused&&!t.options.alwaysShowControls){t.startControlsTimer(t.options.controlsTimeoutMouseLeave)}}})}if(t.options.hideVideoControlsOnLoad){t.hideControls(false)}if(autoplay&&!t.options.alwaysShowControls){t.hideControls()}if(t.options.enableAutosize){t.media.addEventListener("loadedmetadata",function(e){if(t.options.videoHeight<=0&&t.domNode.getAttribute("height")===null&&!isNaN(e.target.videoHeight)){t.setPlayerSize(e.target.videoWidth,e.target.videoHeight);t.setControlsSize();t.media.setVideoSize(e.target.videoWidth,e.target.videoHeight)}},false)}}t.media.addEventListener("play",function(){var playerIndex;for(playerIndex in mejs.players){var p=mejs.players[playerIndex];if(p.id!=t.id&&t.options.pauseOtherPlayers&&!p.paused&&!p.ended){p.pause()}p.hasFocus=false}t.hasFocus=true},false);t.media.addEventListener("ended",function(e){if(t.options.autoRewind){try{t.media.setCurrentTime(0);window.setTimeout(function(){$(t.container).find(".mejs-overlay-loading").parent().hide()},20)}catch(exp){}}if(t.media.pluginType==="youtube"){t.media.stop()}else{t.media.pause()}if(t.setProgressRail){t.setProgressRail()}if(t.setCurrentRail){t.setCurrentRail()}if(t.options.loop){t.play()}else if(!t.options.alwaysShowControls&&t.controlsEnabled){t.showControls()}},false);t.media.addEventListener("loadedmetadata",function(){mejs.Utility.calculateTimeFormat(t.duration,t.options,t.options.framesPerSecond||25);if(t.updateDuration){t.updateDuration()}if(t.updateCurrent){t.updateCurrent()}if(!t.isFullScreen){t.setPlayerSize(t.width,t.height);t.setControlsSize()}},false);var duration=null;t.media.addEventListener("timeupdate",function(){if(duration!==this.duration){duration=this.duration;mejs.Utility.calculateTimeFormat(duration,t.options,t.options.framesPerSecond||25);if(t.updateDuration){t.updateDuration()}if(t.updateCurrent){t.updateCurrent()}t.setControlsSize()}},false);t.container.focusout(function(e){if(e.relatedTarget){var $target=$(e.relatedTarget);if(t.keyboardAction&&$target.parents(".mejs-container").length===0){t.keyboardAction=false;if(t.isVideo&&!t.options.alwaysShowControls){t.hideControls(true)}}}});setTimeout(function(){t.setPlayerSize(t.width,t.height);t.setControlsSize()},50);t.globalBind("resize",function(){if(!(t.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen)){t.setPlayerSize(t.width,t.height)}t.setControlsSize()});if(t.media.pluginType=="youtube"&&(mf.isiOS||mf.isAndroid)){t.container.find(".mejs-overlay-play").hide();t.container.find(".mejs-poster").hide()}}if(autoplay&&media.pluginType=="native"){t.play()}if(t.options.success){if(typeof t.options.success=="string"){window[t.options.success](t.media,t.domNode,t)}else{t.options.success(t.media,t.domNode,t)}}},handleError:function(e){var t=this;if(t.controls){t.controls.hide()}if(t.options.error){t.options.error(e)}},setPlayerSize:function(width,height){var t=this;if(!t.options.setDimensions){return false}if(typeof width!="undefined"){t.width=width}if(typeof height!="undefined"){t.height=height}switch(t.options.stretching){case"fill":if(t.isVideo){this.setFillMode()}else{this.setDimensions(t.width,t.height)}break;case"responsive":this.setResponsiveMode();break;case"none":this.setDimensions(t.width,t.height);break;default:if(this.hasFluidMode()===true){this.setResponsiveMode()}else{this.setDimensions(t.width,t.height)}break}},hasFluidMode:function(){var t=this;return t.height.toString().indexOf("%")>0||t.$node.css("max-width")!=="none"&&t.$node.css("max-width")!=="t.width"||t.$node[0].currentStyle&&t.$node[0].currentStyle.maxWidth==="100%"},setResponsiveMode:function(){var t=this;var nativeWidth=function(){if(t.isVideo){if(t.media.videoWidth&&t.media.videoWidth>0){return t.media.videoWidth}else if(t.media.getAttribute("width")!==null){return t.media.getAttribute("width")}else{return t.options.defaultVideoWidth}}else{return t.options.defaultAudioWidth}}();var nativeHeight=function(){if(t.isVideo){if(t.media.videoHeight&&t.media.videoHeight>0){return t.media.videoHeight}else if(t.media.getAttribute("height")!==null){return t.media.getAttribute("height")}else{return t.options.defaultVideoHeight}}else{return t.options.defaultAudioHeight}}();var parentWidth=t.container.parent().closest(":visible").width(),parentHeight=t.container.parent().closest(":visible").height(),newHeight=t.isVideo||!t.options.autosizeProgress?parseInt(parentWidth*nativeHeight/nativeWidth,10):nativeHeight;if(isNaN(newHeight)||parentHeight!==0&&newHeight>parentHeight&&parentHeight>nativeHeight){newHeight=parentHeight}if(t.container.parent().length>0&&t.container.parent()[0].tagName.toLowerCase()==="body"){parentWidth=$(window).width();newHeight=$(window).height()}if(newHeight&&parentWidth){t.container.width(parentWidth).height(newHeight);t.$media.add(t.container.find(".mejs-shim")).width("100%").height("100%");if(t.isVideo){if(t.media.setVideoSize){t.media.setVideoSize(parentWidth,newHeight)}}t.layers.children(".mejs-layer").width("100%").height("100%")}},setFillMode:function(){var t=this,parent=t.outerContainer;if(!parent.width()){parent.height(t.$media.width())}if(!parent.height()){parent.height(t.$media.height())}var parentWidth=parent.width(),parentHeight=parent.height();t.setDimensions("100%","100%");t.container.find(".mejs-poster img").css("display","block");targetElement=t.container.find("object, embed, iframe, video");var initHeight=t.height,initWidth=t.width,scaleX1=parentWidth,scaleY1=initHeight*parentWidth/initWidth,scaleX2=initWidth*parentHeight/initHeight,scaleY2=parentHeight,bScaleOnWidth=!(scaleX2>parentWidth),finalWidth=bScaleOnWidth?Math.floor(scaleX1):Math.floor(scaleX2),finalHeight=bScaleOnWidth?Math.floor(scaleY1):Math.floor(scaleY2);if(bScaleOnWidth){targetElement.height(finalHeight).width(parentWidth);if(t.media.setVideoSize){t.media.setVideoSize(parentWidth,finalHeight)}}else{targetElement.height(parentHeight).width(finalWidth);if(t.media.setVideoSize){t.media.setVideoSize(finalWidth,parentHeight)}}targetElement.css({"margin-left":Math.floor((parentWidth-finalWidth)/2),"margin-top":0})},setDimensions:function(width,height){var t=this;t.container.width(width).height(height);t.layers.children(".mejs-layer").width(width).height(height)},setControlsSize:function(){var t=this,usedWidth=0,railWidth=0,rail=t.controls.find(".mejs-time-rail"),total=t.controls.find(".mejs-time-total"),others=rail.siblings(),lastControl=others.last(),lastControlPosition=null,avoidAutosizeProgress=t.options&&!t.options.autosizeProgress;if(!t.container.is(":visible")||!rail.length||!rail.is(":visible")){return}if(avoidAutosizeProgress){railWidth=parseInt(rail.css("width"),10)}if(railWidth===0||!railWidth){others.each(function(){var $this=$(this);if($this.css("position")!="absolute"&&$this.is(":visible")){usedWidth+=$(this).outerWidth(true)}});railWidth=t.controls.width()-usedWidth-(rail.outerWidth(true)-rail.width())}do{if(!avoidAutosizeProgress){rail.width(railWidth)}total.width(railWidth-(total.outerWidth(true)-total.width()));if(lastControl.css("position")!="absolute"){lastControlPosition=lastControl.length?lastControl.position():null;railWidth--}}while(lastControlPosition!==null&&lastControlPosition.top.toFixed(2)>0&&railWidth>0);t.container.trigger("controlsresize")},buildposter:function(player,controls,layers,media){var t=this,poster=$('<div class="mejs-poster mejs-layer">'+"</div>").appendTo(layers),posterUrl=player.$media.attr("poster");if(player.options.poster!==""){posterUrl=player.options.poster}if(posterUrl){t.setPoster(posterUrl)}else{poster.hide()}media.addEventListener("play",function(){poster.hide()},false);if(player.options.showPosterWhenEnded&&player.options.autoRewind){media.addEventListener("ended",function(){poster.show()},false)}},setPoster:function(url){var t=this,posterDiv=t.container.find(".mejs-poster"),posterImg=posterDiv.find("img");if(posterImg.length===0){posterImg=$('<img width="100%" height="100%" alt="" />').appendTo(posterDiv)}posterImg.attr("src",url);posterDiv.css({"background-image":"url("+url+")"})},buildoverlays:function(player,controls,layers,media){var t=this;if(!player.isVideo)return;var loading=$('<div class="mejs-overlay mejs-layer">'+'<div class="mejs-overlay-loading"><span></span></div>'+"</div>").hide().appendTo(layers),error=$('<div class="mejs-overlay mejs-layer">'+'<div class="mejs-overlay-error"></div>'+"</div>").hide().appendTo(layers),bigPlay=$('<div class="mejs-overlay mejs-layer mejs-overlay-play">'+'<div class="mejs-overlay-button" role="button" aria-label="'+mejs.i18n.t("mejs.play")+'" aria-pressed="false"></div>'+"</div>").appendTo(layers).bind("click",function(){if(t.options.clickToPlayPause){if(media.paused){media.play()}var button=$(this).find(".mejs-overlay-button"),pressed=button.attr("aria-pressed");button.attr("aria-pressed",!!pressed)}});media.addEventListener("play",function(){bigPlay.hide();loading.hide();controls.find(".mejs-time-buffering").hide();error.hide()},false);media.addEventListener("playing",function(){bigPlay.hide();loading.hide();controls.find(".mejs-time-buffering").hide();error.hide()},false);media.addEventListener("seeking",function(){loading.show();controls.find(".mejs-time-buffering").show()},false);media.addEventListener("seeked",function(){loading.hide();controls.find(".mejs-time-buffering").hide()},false);media.addEventListener("pause",function(){if(!mejs.MediaFeatures.isiPhone){bigPlay.show()}},false);media.addEventListener("waiting",function(){loading.show();controls.find(".mejs-time-buffering").show()},false);media.addEventListener("loadeddata",function(){loading.show();controls.find(".mejs-time-buffering").show();if(mejs.MediaFeatures.isAndroid){media.canplayTimeout=window.setTimeout(function(){if(document.createEvent){var evt=document.createEvent("HTMLEvents");evt.initEvent("canplay",true,true);return media.dispatchEvent(evt)}},300)}},false);media.addEventListener("canplay",function(){loading.hide();controls.find(".mejs-time-buffering").hide();clearTimeout(media.canplayTimeout)},false);media.addEventListener("error",function(e){t.handleError(e);loading.hide();bigPlay.hide();error.show();error.find(".mejs-overlay-error").html("Error loading this resource")},false);media.addEventListener("keydown",function(e){t.onkeydown(player,media,e)},false)},buildkeyboard:function(player,controls,layers,media){var t=this;t.container.keydown(function(){t.keyboardAction=true});t.globalBind("keydown",function(event){player.hasFocus=$(event.target).closest(".mejs-container").length!==0&&$(event.target).closest(".mejs-container").attr("id")===player.$media.closest(".mejs-container").attr("id");return t.onkeydown(player,media,event)});t.globalBind("click",function(event){player.hasFocus=$(event.target).closest(".mejs-container").length!==0})},onkeydown:function(player,media,e){if(player.hasFocus&&player.options.enableKeyboard){for(var i=0,il=player.options.keyActions.length;i<il;i++){var keyAction=player.options.keyActions[i];for(var j=0,jl=keyAction.keys.length;j<jl;j++){if(e.keyCode==keyAction.keys[j]){if(typeof e.preventDefault=="function")e.preventDefault();keyAction.action(player,media,e.keyCode,e);return false}}}}return true},findTracks:function(){var t=this,tracktags=t.$media.find("track");t.tracks=[];tracktags.each(function(index,track){track=$(track);t.tracks.push({srclang:track.attr("srclang")?track.attr("srclang").toLowerCase():"",src:track.attr("src"),kind:track.attr("kind"),label:track.attr("label")||"",entries:[],isLoaded:false})})},changeSkin:function(className){this.container[0].className="mejs-container "+className;this.setPlayerSize(this.width,this.height);this.setControlsSize()},play:function(){this.load();this.media.play()},pause:function(){try{this.media.pause()}catch(e){}},load:function(){if(!this.isLoaded){this.media.load()}this.isLoaded=true},setMuted:function(muted){this.media.setMuted(muted)},setCurrentTime:function(time){this.media.setCurrentTime(time)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(volume){this.media.setVolume(volume)},getVolume:function(){return this.media.volume},setSrc:function(src){var t=this;if(t.media.pluginType==="youtube"){var videoId;if(typeof src!=="string"){var i,media;for(i=0;i<src.length;i++){media=src[i];if(this.canPlayType(media.type)){src=media.src;break}}}if(src.lastIndexOf("youtu.be")!==-1){videoId=src.substr(src.lastIndexOf("/")+1);if(videoId.indexOf("?")!==-1){videoId=videoId.substr(0,videoId.indexOf("?"))}}else{var videoIdMatch=src.match(/[?&]v=([^&#]+)|&|#|$/);if(videoIdMatch){videoId=videoIdMatch[1]}}if(t.media.getAttribute("autoplay")!==null){t.media.pluginApi.loadVideoById(videoId)}else{t.media.pluginApi.cueVideoById(videoId)}}else{t.media.setSrc(src)}},remove:function(){var t=this,featureIndex,feature;t.container.prev(".mejs-offscreen").remove();for(featureIndex in t.options.features){feature=t.options.features[featureIndex];if(t["clean"+feature]){try{t["clean"+feature](t)}catch(e){}}}if(!t.isDynamic){t.$media.prop("controls",true);t.$node.clone().insertBefore(t.container).show();t.$node.remove()}else{t.$node.insertBefore(t.container)}if(t.media.pluginType!=="native"){t.media.remove()}delete mejs.players[t.id];if(typeof t.container=="object"){t.container.remove()}t.globalUnbind();delete t.node.player},rebuildtracks:function(){var t=this;t.findTracks();t.buildtracks(t,t.controls,t.layers,t.media)},resetSize:function(){var t=this;setTimeout(function(){t.setPlayerSize(t.width,t.height);t.setControlsSize()},50)}};(function(){var rwindow=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;function splitEvents(events,id){var ret={d:[],w:[]};$.each((events||"").split(" "),function(k,v){var eventname=v+"."+id;if(eventname.indexOf(".")===0){ret.d.push(eventname);ret.w.push(eventname)}else{ret[rwindow.test(v)?"w":"d"].push(eventname)}});ret.d=ret.d.join(" ");ret.w=ret.w.join(" ");return ret}mejs.MediaElementPlayer.prototype.globalBind=function(events,data,callback){var t=this;var doc=t.node?t.node.ownerDocument:document;events=splitEvents(events,t.id);if(events.d)$(doc).bind(events.d,data,callback);if(events.w)$(window).bind(events.w,data,callback)};mejs.MediaElementPlayer.prototype.globalUnbind=function(events,callback){var t=this;var doc=t.node?t.node.ownerDocument:document;events=splitEvents(events,t.id);if(events.d)$(doc).unbind(events.d,callback);if(events.w)$(window).unbind(events.w,callback)}})();if(typeof $!="undefined"){$.fn.mediaelementplayer=function(options){if(options===false){this.each(function(){var player=$(this).data("mediaelementplayer");if(player){player.remove()}$(this).removeData("mediaelementplayer")})}else{this.each(function(){$(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,options))})}return this};$(document).ready(function(){$(".mejs-player").mediaelementplayer()})}window.MediaElementPlayer=mejs.MediaElementPlayer})(mejs.$);