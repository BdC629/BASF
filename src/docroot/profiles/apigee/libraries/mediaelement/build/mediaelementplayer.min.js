if(typeof jQuery!="undefined"){mejs.$=jQuery}else if(typeof Zepto!="undefined"){mejs.$=Zepto;Zepto.fn.outerWidth=function(includeMargin){var width=$(this).width();if(includeMargin){width+=parseInt($(this).css("margin-right"),10);width+=parseInt($(this).css("margin-left"),10)}return width}}else if(typeof ender!="undefined"){mejs.$=ender}(function($){mejs.MepDefaults={poster:"",showPosterWhenEnded:false,defaultVideoWidth:480,defaultVideoHeight:270,videoWidth:-1,videoHeight:-1,defaultAudioWidth:400,defaultAudioHeight:30,defaultSeekBackwardInterval:function(media){return media.duration*.05},defaultSeekForwardInterval:function(media){return media.duration*.05},setDimensions:true,audioWidth:-1,audioHeight:-1,startVolume:.8,loop:false,autoRewind:true,enableAutosize:true,timeFormat:"",alwaysShowHours:false,showTimecodeFrameCount:false,framesPerSecond:25,autosizeProgress:true,alwaysShowControls:false,hideVideoControlsOnLoad:false,clickToPlayPause:true,controlsTimeoutDefault:1500,controlsTimeoutMouseEnter:2500,controlsTimeoutMouseLeave:1e3,iPadUseNativeControls:false,iPhoneUseNativeControls:false,AndroidUseNativeControls:false,features:["playpause","current","progress","duration","tracks","volume","fullscreen"],isVideo:true,stretching:"auto",enableKeyboard:true,pauseOtherPlayers:true,keyActions:[{keys:[32,179],action:function(player,media,key,event){if(!mejs.MediaFeatures.isFirefox){if(media.paused||media.ended){media.play()}else{media.pause()}}}},{keys:[38],action:function(player,media,key,event){player.container.find(".mejs-volume-slider").css("display","block");if(player.isVideo){player.showControls();player.startControlsTimer()}var newVolume=Math.min(media.volume+.1,1);media.setVolume(newVolume)}},{keys:[40],action:function(player,media,key,event){player.container.find(".mejs-volume-slider").css("display","block");if(player.isVideo){player.showControls();player.startControlsTimer()}var newVolume=Math.max(media.volume-.1,0);media.setVolume(newVolume)}},{keys:[37,227],action:function(player,media,key,event){if(!isNaN(media.duration)&&media.duration>0){if(player.isVideo){player.showControls();player.startControlsTimer()}var newTime=Math.max(media.currentTime-player.options.defaultSeekBackwardInterval(media),0);media.setCurrentTime(newTime)}}},{keys:[39,228],action:function(player,media,key,event){if(!isNaN(media.duration)&&media.duration>0){if(player.isVideo){player.showControls();player.startControlsTimer()}var newTime=Math.min(media.currentTime+player.options.defaultSeekForwardInterval(media),media.duration);media.setCurrentTime(newTime)}}},{keys:[70],action:function(player,media,key,event){if(typeof player.enterFullScreen!="undefined"){if(player.isFullScreen){player.exitFullScreen()}else{player.enterFullScreen()}}}},{keys:[77],action:function(player,media,key,event){player.container.find(".mejs-volume-slider").css("display","block");if(player.isVideo){player.showControls();player.startControlsTimer()}if(player.media.muted){player.setMuted(false)}else{player.setMuted(true)}}}]};mejs.mepIndex=0;mejs.players={};mejs.MediaElementPlayer=function(node,o){if(!(this instanceof mejs.MediaElementPlayer)){return new mejs.MediaElementPlayer(node,o)}var t=this;t.$media=t.$node=$(node);t.node=t.media=t.$media[0];if(!t.node){return}if(typeof t.node.player!="undefined"){return t.node.player}if(typeof o=="undefined"){o=t.$node.data("mejsoptions")}t.options=$.extend({},mejs.MepDefaults,o);if(!t.options.timeFormat){t.options.timeFormat="mm:ss";if(t.options.alwaysShowHours){t.options.timeFormat="hh:mm:ss"}if(t.options.showTimecodeFrameCount){t.options.timeFormat+=":ff"}}mejs.Utility.calculateTimeFormat(0,t.options,t.options.framesPerSecond||25);t.id="mep_"+mejs.mepIndex++;mejs.players[t.id]=t;t.init();return t};mejs.MediaElementPlayer.prototype={hasFocus:false,controlsAreVisible:true,init:function(){var t=this,mf=mejs.MediaFeatures,meOptions=$.extend(true,{},t.options,{success:function(media,domNode){t.meReady(media,domNode)},error:function(e){t.handleError(e)}}),tagName=t.media.tagName.toLowerCase();t.isDynamic=tagName!=="audio"&&tagName!=="video";if(t.isDynamic){t.isVideo=t.options.isVideo}else{t.isVideo=tagName!=="audio"&&t.options.isVideo}if(mf.isiPad&&t.options.iPadUseNativeControls||mf.isiPhone&&t.options.iPhoneUseNativeControls){t.$media.attr("controls","controls");if(mf.isiPad&&t.media.getAttribute("autoplay")!==null){t.play()}}else if(mf.isAndroid&&t.options.AndroidUseNativeControls){}else if(t.isVideo||!t.isVideo&&t.options.features.length){t.$media.removeAttr("controls");var videoPlayerTitle=t.isVideo?mejs.i18n.t("mejs.video-player"):mejs.i18n.t("mejs.audio-player");$('<span class="mejs-offscreen">'+videoPlayerTitle+"</span>").insertBefore(t.$media);t.container=$('<div id="'+t.id+'" class="mejs-container '+(mejs.MediaFeatures.svgAsImg?"svg":"no-svg")+'" tabindex="0" role="application" aria-label="'+videoPlayerTitle+'">'+'<div class="mejs-inner">'+'<div class="mejs-mediaelement"></div>'+'<div class="mejs-layers"></div>'+'<div class="mejs-controls"></div>'+'<div class="mejs-clear"></div>'+"</div>"+"</div>").addClass(t.$media[0].className).insertBefore(t.$media).focus(function(e){if(!t.controlsAreVisible&&!t.hasFocus&&t.controlsEnabled){t.showControls(true);if(!t.hasMsNativeFullScreen){var btnSelector=".mejs-playpause-button > button";if(mejs.Utility.isNodeAfter(e.relatedTarget,t.container[0])){btnSelector=".mejs-controls .mejs-button:last-child > button"}var button=t.container.find(btnSelector);button.focus()}}});if(!t.options.features.length){t.container.css("background","transparent").find(".mejs-controls").hide()}if(t.isVideo&&t.options.stretching==="fill"&&!t.container.parent("mejs-fill-container").length){t.outerContainer=t.$media.parent();t.container.wrap('<div class="mejs-fill-container"/>')}t.container.addClass((mf.isAndroid?"mejs-android ":"")+(mf.isiOS?"mejs-ios ":"")+(mf.isiPad?"mejs-ipad ":"")+(mf.isiPhone?"mejs-iphone ":"")+(t.isVideo?"mejs-video ":"mejs-audio "));t.container.find(".mejs-mediaelement").append(t.$media);t.node.player=t;t.controls=t.container.find(".mejs-controls");t.layers=t.container.find(".mejs-layers");var tagType=t.isVideo?"video":"audio",capsTagName=tagType.substring(0,1).toUpperCase()+tagType.substring(1);if(t.options[tagType+"Width"]>0||t.options[tagType+"Width"].toString().indexOf("%")>-1){t.width=t.options[tagType+"Width"]}else if(t.media.style.width!==""&&t.media.style.width!==null){t.width=t.media.style.width}else if(t.media.getAttribute("width")!==null){t.width=t.$media.attr("width")}else{t.width=t.options["default"+capsTagName+"Width"]}if(t.options[tagType+"Height"]>0||t.options[tagType+"Height"].toString().indexOf("%")>-1){t.height=t.options[tagType+"Height"]}else if(t.media.style.height!==""&&t.media.style.height!==null){t.height=t.media.style.height}else if(t.$media[0].getAttribute("height")!==null){t.height=t.$media.attr("height")}else{t.height=t.options["default"+capsTagName+"Height"]}t.setPlayerSize(t.width,t.height);meOptions.pluginWidth=t.width;meOptions.pluginHeight=t.height}else if(!t.isVideo&&!t.options.features.length){t.$media.hide()}mejs.MediaElement(t.$media[0],meOptions);if(typeof t.container!=="undefined"&&t.options.features.length&&t.controlsAreVisible){t.container.trigger("controlsshown")}},showControls:function(doAnimation){var t=this;doAnimation=typeof doAnimation=="undefined"||doAnimation;if(t.controlsAreVisible)return;if(doAnimation){t.controls.removeClass("mejs-offscreen").stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true;t.container.trigger("controlsshown")});t.container.find(".mejs-control").removeClass("mejs-offscreen").stop(true,true).fadeIn(200,function(){t.controlsAreVisible=true})}else{t.controls.removeClass("mejs-offscreen").css("display","block");t.container.find(".mejs-control").removeClass("mejs-offscreen").css("display","block");t.controlsAreVisible=true;t.container.trigger("controlsshown")}t.setControlsSize()},hideControls:function(doAnimation){var t=this;doAnimation=typeof doAnimation=="undefined"||doAnimation;if(!t.controlsAreVisible||t.options.alwaysShowControls||t.keyboardAction||t.media.paused||t.media.ended)return;if(doAnimation){t.controls.stop(true,true).fadeOut(200,function(){$(this).addClass("mejs-offscreen").css("display","block");t.controlsAreVisible=false;t.container.trigger("controlshidden")});t.container.find(".mejs-control").stop(true,true).fadeOut(200,function(){$(this).addClass("mejs-offscreen").css("display","block")})}else{t.controls.addClass("mejs-offscreen").css("display","block");t.container.find(".mejs-control").addClass("mejs-offscreen").css("display","block");t.controlsAreVisible=false;t.container.trigger("controlshidden")}},controlsTimer:null,startControlsTimer:function(timeout){var t=this;timeout=typeof timeout!="undefined"?timeout:t.options.controlsTimeoutDefault;t.killControlsTimer("start");t.controlsTimer=setTimeout(function(){t.hideControls();t.killControlsTimer("hide")},timeout)},killControlsTimer:function(src){var t=this;if(t.controlsTimer!==null){clearTimeout(t.controlsTimer);delete t.controlsTimer;t.controlsTimer=null}},controlsEnabled:true,disableControls:function(){var t=this;t.killControlsTimer();t.hideControls(false);this.controlsEnabled=false},enableControls:function(){var t=this;t.showControls(false);t.controlsEnabled=true},meReady:function(media,domNode){var t=this,mf=mejs.MediaFeatures,autoplayAttr=domNode.getAttribute("autoplay"),autoplay=!(typeof autoplayAttr=="undefined"||autoplayAttr===null||autoplayAttr==="false"),featureIndex,feature;if(t.created){return}else{t.created=true}t.media=media;t.domNode=domNode;if(!(mf.isAndroid&&t.options.AndroidUseNativeControls)&&!(mf.isiPad&&t.options.iPadUseNativeControls)&&!(mf.isiPhone&&t.options.iPhoneUseNativeControls)){if(!t.isVideo&&!t.options.features.length){if(autoplay&&media.pluginType=="native"){t.play()}if(t.options.success){if(typeof t.options.success=="string"){window[t.options.success](t.media,t.domNode,t)}else{t.options.success(t.media,t.domNode,t)}}return}t.buildposter(t,t.controls,t.layers,t.media);t.buildkeyboard(t,t.controls,t.layers,t.media);t.buildoverlays(t,t.controls,t.layers,t.media);t.findTracks();for(featureIndex in t.options.features){feature=t.options.features[featureIndex];if(t["build"+feature]){try{t["build"+feature](t,t.controls,t.layers,t.media)}catch(e){}}}t.container.trigger("controlsready");t.setPlayerSize(t.width,t.height);t.setControlsSize();if(t.isVideo){if(mejs.MediaFeatures.hasTouch&&!t.options.alwaysShowControls){t.$media.bind("touchstart",function(){if(t.controlsAreVisible){t.hideControls(false)}else{if(t.controlsEnabled){t.showControls(false)}}})}else{t.clickToPlayPauseCallback=function(){if(t.options.clickToPlayPause){if(t.media.paused){t.play()}else{t.pause()}var button=t.$media.closest(".mejs-container").find(".mejs-overlay-button"),pressed=button.attr("aria-pressed");button.attr("aria-pressed",!pressed)}};t.media.addEventListener("click",t.clickToPlayPauseCallback,false);t.container.bind("mouseenter",function(){if(t.controlsEnabled){if(!t.options.alwaysShowControls){t.killControlsTimer("enter");t.showControls();t.startControlsTimer(t.options.controlsTimeoutMouseEnter)}}}).bind("mousemove",function(){if(t.controlsEnabled){if(!t.controlsAreVisible){t.showControls()}if(!t.options.alwaysShowControls){t.startControlsTimer(t.options.controlsTimeoutMouseEnter)}}}).bind("mouseleave",function(){if(t.controlsEnabled){if(!t.media.paused&&!t.options.alwaysShowControls){t.startControlsTimer(t.options.controlsTimeoutMouseLeave)}}})}if(t.options.hideVideoControlsOnLoad){t.hideControls(false)}if(autoplay&&!t.options.alwaysShowControls){t.hideControls()}if(t.options.enableAutosize){t.media.addEventListener("loadedmetadata",function(e){if(t.options.videoHeight<=0&&t.domNode.getAttribute("height")===null&&!isNaN(e.target.videoHeight)){t.setPlayerSize(e.target.videoWidth,e.target.videoHeight);t.setControlsSize();t.media.setVideoSize(e.target.videoWidth,e.target.videoHeight)}},false)}}t.media.addEventListener("play",function(){var playerIndex;for(playerIndex in mejs.players){var p=mejs.players[playerIndex];if(p.id!=t.id&&t.options.pauseOtherPlayers&&!p.paused&&!p.ended){p.pause()}p.hasFocus=false}t.hasFocus=true},false);t.media.addEventListener("ended",function(e){if(t.options.autoRewind){try{t.media.setCurrentTime(0);window.setTimeout(function(){$(t.container).find(".mejs-overlay-loading").parent().hide()},20)}catch(exp){}}if(t.media.pluginType==="youtube"){t.media.stop()}else{t.media.pause()}if(t.setProgressRail){t.setProgressRail()}if(t.setCurrentRail){t.setCurrentRail()}if(t.options.loop){t.play()}else if(!t.options.alwaysShowControls&&t.controlsEnabled){t.showControls()}},false);t.media.addEventListener("loadedmetadata",function(){mejs.Utility.calculateTimeFormat(t.duration,t.options,t.options.framesPerSecond||25);if(t.updateDuration){t.updateDuration()}if(t.updateCurrent){t.updateCurrent()}if(!t.isFullScreen){t.setPlayerSize(t.width,t.height);t.setControlsSize()}},false);var duration=null;t.media.addEventListener("timeupdate",function(){if(duration!==this.duration){duration=this.duration;mejs.Utility.calculateTimeFormat(duration,t.options,t.options.framesPerSecond||25);if(t.updateDuration){t.updateDuration()}if(t.updateCurrent){t.updateCurrent()}t.setControlsSize()}},false);t.container.focusout(function(e){if(e.relatedTarget){var $target=$(e.relatedTarget);if(t.keyboardAction&&$target.parents(".mejs-container").length===0){t.keyboardAction=false;if(t.isVideo&&!t.options.alwaysShowControls){t.hideControls(true)}}}});setTimeout(function(){t.setPlayerSize(t.width,t.height);t.setControlsSize()},50);t.globalBind("resize",function(){if(!(t.isFullScreen||mejs.MediaFeatures.hasTrueNativeFullScreen&&document.webkitIsFullScreen)){t.setPlayerSize(t.width,t.height)}t.setControlsSize()});if(t.media.pluginType=="youtube"&&(mf.isiOS||mf.isAndroid)){t.container.find(".mejs-overlay-play").hide();t.container.find(".mejs-poster").hide()}}if(autoplay&&media.pluginType=="native"){t.play()}if(t.options.success){if(typeof t.options.success=="string"){window[t.options.success](t.media,t.domNode,t)}else{t.options.success(t.media,t.domNode,t)}}},handleError:function(e){var t=this;if(t.controls){t.controls.hide()}if(t.options.error){t.options.error(e)}},setPlayerSize:function(width,height){var t=this;if(!t.options.setDimensions){return false}if(typeof width!="undefined"){t.width=width}if(typeof height!="undefined"){t.height=height}switch(t.options.stretching){case"fill":if(t.isVideo){this.setFillMode()}else{this.setDimensions(t.width,t.height)}break;case"responsive":this.setResponsiveMode();break;case"none":this.setDimensions(t.width,t.height);break;default:if(this.hasFluidMode()===true){this.setResponsiveMode()}else{this.setDimensions(t.width,t.height)}break}},hasFluidMode:function(){var t=this;return t.height.toString().indexOf("%")>0||t.$node.css("max-width")!=="none"&&t.$node.css("max-width")!=="t.width"||t.$node[0].currentStyle&&t.$node[0].currentStyle.maxWidth==="100%"},setResponsiveMode:function(){var t=this;var nativeWidth=function(){if(t.isVideo){if(t.media.videoWidth&&t.media.videoWidth>0){return t.media.videoWidth}else if(t.media.getAttribute("width")!==null){return t.media.getAttribute("width")}else{return t.options.defaultVideoWidth}}else{return t.options.defaultAudioWidth}}();var nativeHeight=function(){if(t.isVideo){if(t.media.videoHeight&&t.media.videoHeight>0){return t.media.videoHeight}else if(t.media.getAttribute("height")!==null){return t.media.getAttribute("height")}else{return t.options.defaultVideoHeight}}else{return t.options.defaultAudioHeight}}();var parentWidth=t.container.parent().closest(":visible").width(),parentHeight=t.container.parent().closest(":visible").height(),newHeight=t.isVideo||!t.options.autosizeProgress?parseInt(parentWidth*nativeHeight/nativeWidth,10):nativeHeight;if(isNaN(newHeight)||parentHeight!==0&&newHeight>parentHeight&&parentHeight>nativeHeight){newHeight=parentHeight}if(t.container.parent().length>0&&t.container.parent()[0].tagName.toLowerCase()==="body"){parentWidth=$(window).width();newHeight=$(window).height()}if(newHeight&&parentWidth){t.container.width(parentWidth).height(newHeight);t.$media.add(t.container.find(".mejs-shim")).width("100%").height("100%");if(t.isVideo){if(t.media.setVideoSize){t.media.setVideoSize(parentWidth,newHeight)}}t.layers.children(".mejs-layer").width("100%").height("100%")}},setFillMode:function(){var t=this,parent=t.outerContainer;if(!parent.width()){parent.height(t.$media.width())}if(!parent.height()){parent.height(t.$media.height())}var parentWidth=parent.width(),parentHeight=parent.height();t.setDimensions("100%","100%");t.container.find(".mejs-poster img").css("display","block");targetElement=t.container.find("object, embed, iframe, video");var initHeight=t.height,initWidth=t.width,scaleX1=parentWidth,scaleY1=initHeight*parentWidth/initWidth,scaleX2=initWidth*parentHeight/initHeight,scaleY2=parentHeight,bScaleOnWidth=!(scaleX2>parentWidth),finalWidth=bScaleOnWidth?Math.floor(scaleX1):Math.floor(scaleX2),finalHeight=bScaleOnWidth?Math.floor(scaleY1):Math.floor(scaleY2);if(bScaleOnWidth){targetElement.height(finalHeight).width(parentWidth);if(t.media.setVideoSize){t.media.setVideoSize(parentWidth,finalHeight)}}else{targetElement.height(parentHeight).width(finalWidth);if(t.media.setVideoSize){t.media.setVideoSize(finalWidth,parentHeight)}}targetElement.css({"margin-left":Math.floor((parentWidth-finalWidth)/2),"margin-top":0})},setDimensions:function(width,height){var t=this;t.container.width(width).height(height);t.layers.children(".mejs-layer").width(width).height(height)},setControlsSize:function(){var t=this,usedWidth=0,railWidth=0,rail=t.controls.find(".mejs-time-rail"),total=t.controls.find(".mejs-time-total"),others=rail.siblings(),lastControl=others.last(),lastControlPosition=null,avoidAutosizeProgress=t.options&&!t.options.autosizeProgress;if(!t.container.is(":visible")||!rail.length||!rail.is(":visible")){return}if(avoidAutosizeProgress){railWidth=parseInt(rail.css("width"),10)}if(railWidth===0||!railWidth){others.each(function(){var $this=$(this);if($this.css("position")!="absolute"&&$this.is(":visible")){usedWidth+=$(this).outerWidth(true)}});railWidth=t.controls.width()-usedWidth-(rail.outerWidth(true)-rail.width())}do{if(!avoidAutosizeProgress){rail.width(railWidth)}total.width(railWidth-(total.outerWidth(true)-total.width()));if(lastControl.css("position")!="absolute"){lastControlPosition=lastControl.length?lastControl.position():null;railWidth--}}while(lastControlPosition!==null&&lastControlPosition.top.toFixed(2)>0&&railWidth>0);t.container.trigger("controlsresize")},buildposter:function(player,controls,layers,media){var t=this,poster=$('<div class="mejs-poster mejs-layer">'+"</div>").appendTo(layers),posterUrl=player.$media.attr("poster");if(player.options.poster!==""){posterUrl=player.options.poster}if(posterUrl){t.setPoster(posterUrl)}else{poster.hide()}media.addEventListener("play",function(){poster.hide()},false);if(player.options.showPosterWhenEnded&&player.options.autoRewind){media.addEventListener("ended",function(){poster.show()},false)}},setPoster:function(url){var t=this,posterDiv=t.container.find(".mejs-poster"),posterImg=posterDiv.find("img");if(posterImg.length===0){posterImg=$('<img width="100%" height="100%" alt="" />').appendTo(posterDiv)}posterImg.attr("src",url);posterDiv.css({"background-image":"url("+url+")"})},buildoverlays:function(player,controls,layers,media){var t=this;if(!player.isVideo)return;var loading=$('<div class="mejs-overlay mejs-layer">'+'<div class="mejs-overlay-loading"><span></span></div>'+"</div>").hide().appendTo(layers),error=$('<div class="mejs-overlay mejs-layer">'+'<div class="mejs-overlay-error"></div>'+"</div>").hide().appendTo(layers),bigPlay=$('<div class="mejs-overlay mejs-layer mejs-overlay-play">'+'<div class="mejs-overlay-button" role="button" aria-label="'+mejs.i18n.t("mejs.play")+'" aria-pressed="false"></div>'+"</div>").appendTo(layers).bind("click",function(){if(t.options.clickToPlayPause){if(media.paused){media.play()}var button=$(this).find(".mejs-overlay-button"),pressed=button.attr("aria-pressed");button.attr("aria-pressed",!!pressed)}});media.addEventListener("play",function(){bigPlay.hide();loading.hide();controls.find(".mejs-time-buffering").hide();error.hide()},false);media.addEventListener("playing",function(){bigPlay.hide();loading.hide();controls.find(".mejs-time-buffering").hide();error.hide()},false);media.addEventListener("seeking",function(){loading.show();controls.find(".mejs-time-buffering").show()},false);media.addEventListener("seeked",function(){loading.hide();controls.find(".mejs-time-buffering").hide()},false);media.addEventListener("pause",function(){if(!mejs.MediaFeatures.isiPhone){bigPlay.show()}},false);media.addEventListener("waiting",function(){loading.show();controls.find(".mejs-time-buffering").show()},false);media.addEventListener("loadeddata",function(){loading.show();controls.find(".mejs-time-buffering").show();if(mejs.MediaFeatures.isAndroid){media.canplayTimeout=window.setTimeout(function(){if(document.createEvent){var evt=document.createEvent("HTMLEvents");evt.initEvent("canplay",true,true);return media.dispatchEvent(evt)}},300)}},false);media.addEventListener("canplay",function(){loading.hide();controls.find(".mejs-time-buffering").hide();clearTimeout(media.canplayTimeout)},false);media.addEventListener("error",function(e){t.handleError(e);loading.hide();bigPlay.hide();error.show();error.find(".mejs-overlay-error").html("Error loading this resource")},false);media.addEventListener("keydown",function(e){t.onkeydown(player,media,e)},false)},buildkeyboard:function(player,controls,layers,media){var t=this;t.container.keydown(function(){t.keyboardAction=true});t.globalBind("keydown",function(event){player.hasFocus=$(event.target).closest(".mejs-container").length!==0&&$(event.target).closest(".mejs-container").attr("id")===player.$media.closest(".mejs-container").attr("id");return t.onkeydown(player,media,event)});t.globalBind("click",function(event){player.hasFocus=$(event.target).closest(".mejs-container").length!==0})},onkeydown:function(player,media,e){if(player.hasFocus&&player.options.enableKeyboard){for(var i=0,il=player.options.keyActions.length;i<il;i++){var keyAction=player.options.keyActions[i];for(var j=0,jl=keyAction.keys.length;j<jl;j++){if(e.keyCode==keyAction.keys[j]){if(typeof e.preventDefault=="function")e.preventDefault();keyAction.action(player,media,e.keyCode,e);return false}}}}return true},findTracks:function(){var t=this,tracktags=t.$media.find("track");t.tracks=[];tracktags.each(function(index,track){track=$(track);t.tracks.push({srclang:track.attr("srclang")?track.attr("srclang").toLowerCase():"",src:track.attr("src"),kind:track.attr("kind"),label:track.attr("label")||"",entries:[],isLoaded:false})})},changeSkin:function(className){this.container[0].className="mejs-container "+className;this.setPlayerSize(this.width,this.height);this.setControlsSize()},play:function(){this.load();this.media.play()},pause:function(){try{this.media.pause()}catch(e){}},load:function(){if(!this.isLoaded){this.media.load()}this.isLoaded=true},setMuted:function(muted){this.media.setMuted(muted)},setCurrentTime:function(time){this.media.setCurrentTime(time)},getCurrentTime:function(){return this.media.currentTime},setVolume:function(volume){this.media.setVolume(volume)},getVolume:function(){return this.media.volume},setSrc:function(src){var t=this;if(t.media.pluginType==="youtube"){var videoId;if(typeof src!=="string"){var i,media;for(i=0;i<src.length;i++){media=src[i];if(this.canPlayType(media.type)){src=media.src;break}}}if(src.lastIndexOf("youtu.be")!==-1){videoId=src.substr(src.lastIndexOf("/")+1);if(videoId.indexOf("?")!==-1){videoId=videoId.substr(0,videoId.indexOf("?"))}}else{var videoIdMatch=src.match(/[?&]v=([^&#]+)|&|#|$/);if(videoIdMatch){videoId=videoIdMatch[1]}}if(t.media.getAttribute("autoplay")!==null){t.media.pluginApi.loadVideoById(videoId)}else{t.media.pluginApi.cueVideoById(videoId)}}else{t.media.setSrc(src)}},remove:function(){var t=this,featureIndex,feature;t.container.prev(".mejs-offscreen").remove();for(featureIndex in t.options.features){feature=t.options.features[featureIndex];if(t["clean"+feature]){try{t["clean"+feature](t)}catch(e){}}}if(!t.isDynamic){t.$media.prop("controls",true);t.$node.clone().insertBefore(t.container).show();t.$node.remove()}else{t.$node.insertBefore(t.container)}if(t.media.pluginType!=="native"){t.media.remove()}delete mejs.players[t.id];if(typeof t.container=="object"){t.container.remove()}t.globalUnbind();delete t.node.player},rebuildtracks:function(){var t=this;t.findTracks();t.buildtracks(t,t.controls,t.layers,t.media)},resetSize:function(){var t=this;setTimeout(function(){t.setPlayerSize(t.width,t.height);t.setControlsSize()},50)}};(function(){var rwindow=/^((after|before)print|(before)?unload|hashchange|message|o(ff|n)line|page(hide|show)|popstate|resize|storage)\b/;function splitEvents(events,id){var ret={d:[],w:[]};$.each((events||"").split(" "),function(k,v){var eventname=v+"."+id;if(eventname.indexOf(".")===0){ret.d.push(eventname);ret.w.push(eventname)}else{ret[rwindow.test(v)?"w":"d"].push(eventname)}});ret.d=ret.d.join(" ");ret.w=ret.w.join(" ");return ret}mejs.MediaElementPlayer.prototype.globalBind=function(events,data,callback){var t=this;var doc=t.node?t.node.ownerDocument:document;events=splitEvents(events,t.id);if(events.d)$(doc).bind(events.d,data,callback);if(events.w)$(window).bind(events.w,data,callback)};mejs.MediaElementPlayer.prototype.globalUnbind=function(events,callback){var t=this;var doc=t.node?t.node.ownerDocument:document;events=splitEvents(events,t.id);if(events.d)$(doc).unbind(events.d,callback);if(events.w)$(window).unbind(events.w,callback)}})();if(typeof $!="undefined"){$.fn.mediaelementplayer=function(options){if(options===false){this.each(function(){var player=$(this).data("mediaelementplayer");if(player){player.remove()}$(this).removeData("mediaelementplayer")})}else{this.each(function(){$(this).data("mediaelementplayer",new mejs.MediaElementPlayer(this,options))})}return this};$(document).ready(function(){$(".mejs-player").mediaelementplayer()})}window.MediaElementPlayer=mejs.MediaElementPlayer})(mejs.$);(function($){$.extend(mejs.MepDefaults,{playText:"",pauseText:""});$.extend(MediaElementPlayer.prototype,{buildplaypause:function(player,controls,layers,media){var t=this,op=t.options,playTitle=op.playText?op.playText:mejs.i18n.t("mejs.play"),pauseTitle=op.pauseText?op.pauseText:mejs.i18n.t("mejs.pause"),play=$('<div class="mejs-button mejs-playpause-button mejs-play" >'+'<button type="button" aria-controls="'+t.id+'" title="'+playTitle+'" aria-label="'+pauseTitle+'"></button>'+"</div>").appendTo(controls).click(function(e){e.preventDefault();if(media.paused){media.play()}else{media.pause()}return false}),play_btn=play.find("button");function togglePlayPause(which){if("play"===which){play.removeClass("mejs-play").addClass("mejs-pause");play_btn.attr({title:pauseTitle,"aria-label":pauseTitle})}else{play.removeClass("mejs-pause").addClass("mejs-play");play_btn.attr({title:playTitle,"aria-label":playTitle})}}togglePlayPause("pse");media.addEventListener("play",function(){togglePlayPause("play")},false);media.addEventListener("playing",function(){togglePlayPause("play")},false);media.addEventListener("pause",function(){togglePlayPause("pse")},false);media.addEventListener("paused",function(){togglePlayPause("pse")},false)}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{stopText:"Stop"});$.extend(MediaElementPlayer.prototype,{buildstop:function(player,controls,layers,media){var t=this;$('<div class="mejs-button mejs-stop-button mejs-stop">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.stopText+'" aria-label="'+t.options.stopText+'"></button>'+"</div>").appendTo(controls).click(function(){if(!media.paused){media.pause()}if(media.currentTime>0){media.setCurrentTime(0);media.pause();controls.find(".mejs-time-current").width("0px");controls.find(".mejs-time-handle").css("left","0px");controls.find(".mejs-time-float-current").html(mejs.Utility.secondsToTimeCode(0,player.options));controls.find(".mejs-currenttime").html(mejs.Utility.secondsToTimeCode(0,player.options));layers.find(".mejs-poster").show()}})}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{enableProgressTooltip:true,progressHelpText:""});$.extend(MediaElementPlayer.prototype,{buildprogress:function(player,controls,layers,media){var t=this,mouseIsDown=false,mouseIsOver=false,lastKeyPressTime=0,startedPaused=false,autoRewindInitial=player.options.autoRewind,progressTitle=t.options.progressHelpText?t.options.progressHelpText:mejs.i18n.t("mejs.time-help-text"),tooltip=player.options.enableProgressTooltip?'<span class="mejs-time-float">'+'<span class="mejs-time-float-current">00:00</span>'+'<span class="mejs-time-float-corner"></span>'+"</span>":"";$('<div class="mejs-time-rail">'+'<span  class="mejs-time-total mejs-time-slider">'+'<span class="mejs-time-buffering"></span>'+'<span class="mejs-time-loaded"></span>'+'<span class="mejs-time-current"></span>'+'<span class="mejs-time-handle"></span>'+tooltip+"</span>"+"</div>").appendTo(controls);controls.find(".mejs-time-buffering").hide();t.total=controls.find(".mejs-time-total");t.loaded=controls.find(".mejs-time-loaded");t.current=controls.find(".mejs-time-current");t.handle=controls.find(".mejs-time-handle");t.timefloat=controls.find(".mejs-time-float");t.timefloatcurrent=controls.find(".mejs-time-float-current");t.slider=controls.find(".mejs-time-slider");var handleMouseMove=function(e){var offset=t.total.offset(),width=t.total.width(),percentage=0,newTime=0,pos=0,x;if(e.originalEvent&&e.originalEvent.changedTouches){x=e.originalEvent.changedTouches[0].pageX}else if(e.changedTouches){x=e.changedTouches[0].pageX}else{x=e.pageX}if(media.duration){if(x<offset.left){x=offset.left}else if(x>width+offset.left){x=width+offset.left}pos=x-offset.left;percentage=pos/width;newTime=percentage<=.02?0:percentage*media.duration;if(mouseIsDown&&newTime!==media.currentTime){media.setCurrentTime(newTime)}if(!mejs.MediaFeatures.hasTouch){t.timefloat.css("left",pos);t.timefloatcurrent.html(mejs.Utility.secondsToTimeCode(newTime,player.options));t.timefloat.show()}}},updateSlider=function(e){var seconds=media.currentTime,timeSliderText=mejs.i18n.t("mejs.time-slider"),time=mejs.Utility.secondsToTimeCode(seconds,player.options),duration=media.duration;t.slider.attr({"aria-label":timeSliderText,"aria-valuemin":0,"aria-valuemax":duration,"aria-valuenow":seconds,"aria-valuetext":time,role:"slider",tabindex:0})},restartPlayer=function(){var now=new Date;if(now-lastKeyPressTime>=1e3){media.play()}};t.slider.bind("focus",function(e){player.options.autoRewind=false});t.slider.bind("blur",function(e){player.options.autoRewind=autoRewindInitial});t.slider.bind("keydown",function(e){if(new Date-lastKeyPressTime>=1e3){startedPaused=media.paused}var keyCode=e.keyCode,duration=media.duration,seekTime=media.currentTime,seekForward=player.options.defaultSeekForwardInterval(media),seekBackward=player.options.defaultSeekBackwardInterval(media);switch(keyCode){case 37:case 40:seekTime-=seekBackward;break;case 39:case 38:seekTime+=seekForward;break;case 36:seekTime=0;break;case 35:seekTime=duration;break;case 32:case 13:media.paused?media.play():media.pause();return;default:return}seekTime=seekTime<0?0:seekTime>=duration?duration:Math.floor(seekTime);lastKeyPressTime=new Date;if(!startedPaused){media.pause()}if(seekTime<media.duration&&!startedPaused){setTimeout(restartPlayer,1100)}media.setCurrentTime(seekTime);e.preventDefault();e.stopPropagation();return false});t.total.bind("mousedown touchstart",function(e){if(e.which===1||e.which===0){mouseIsDown=true;handleMouseMove(e);t.globalBind("mousemove.dur touchmove.dur",function(e){handleMouseMove(e)});t.globalBind("mouseup.dur touchend.dur",function(e){mouseIsDown=false;if(typeof t.timefloat!=="undefined"){t.timefloat.hide()}t.globalUnbind(".dur")})}}).bind("mouseenter",function(e){mouseIsOver=true;t.globalBind("mousemove.dur",function(e){handleMouseMove(e)});if(typeof t.timefloat!=="undefined"&&!mejs.MediaFeatures.hasTouch){t.timefloat.show()}}).bind("mouseleave",function(e){mouseIsOver=false;if(!mouseIsDown){t.globalUnbind(".dur");if(typeof t.timefloat!=="undefined"){t.timefloat.hide()}}});media.addEventListener("progress",function(e){player.setProgressRail(e);player.setCurrentRail(e)},false);media.addEventListener("timeupdate",function(e){player.setProgressRail(e);player.setCurrentRail(e);updateSlider(e)},false);t.container.on("controlsresize",function(e){player.setProgressRail(e);player.setCurrentRail(e)})},setProgressRail:function(e){var t=this,target=e!==undefined?e.target:t.media,percent=null;if(target&&target.buffered&&target.buffered.length>0&&target.buffered.end&&target.duration){percent=target.buffered.end(target.buffered.length-1)/target.duration}else if(target&&target.bytesTotal!==undefined&&target.bytesTotal>0&&target.bufferedBytes!==undefined){percent=target.bufferedBytes/target.bytesTotal}else if(e&&e.lengthComputable&&e.total!==0){percent=e.loaded/e.total}if(percent!==null){percent=Math.min(1,Math.max(0,percent));if(t.loaded&&t.total){t.loaded.width(t.total.width()*percent)}}},setCurrentRail:function(){var t=this;if(t.media.currentTime!==undefined&&t.media.duration){if(t.total&&t.handle){var newWidth=Math.round(t.total.width()*t.media.currentTime/t.media.duration),handlePos=newWidth-Math.round(t.handle.outerWidth(true)/2);t.current.width(newWidth);t.handle.css("left",handlePos)}}}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{duration:-1,timeAndDurationSeparator:"<span> | </span>"});$.extend(MediaElementPlayer.prototype,{buildcurrent:function(player,controls,layers,media){var t=this;$('<div class="mejs-time" role="timer" aria-live="off">'+'<span class="mejs-currenttime">'+mejs.Utility.secondsToTimeCode(0,player.options)+"</span>"+"</div>").appendTo(controls);t.currenttime=t.controls.find(".mejs-currenttime");media.addEventListener("timeupdate",function(){if(t.controlsAreVisible){player.updateCurrent()}},false)},buildduration:function(player,controls,layers,media){var t=this;if(controls.children().last().find(".mejs-currenttime").length>0){$(t.options.timeAndDurationSeparator+'<span class="mejs-duration">'+mejs.Utility.secondsToTimeCode(t.options.duration,t.options)+"</span>").appendTo(controls.find(".mejs-time"))}else{controls.find(".mejs-currenttime").parent().addClass("mejs-currenttime-container");$('<div class="mejs-time mejs-duration-container">'+'<span class="mejs-duration">'+mejs.Utility.secondsToTimeCode(t.options.duration,t.options)+"</span>"+"</div>").appendTo(controls)}t.durationD=t.controls.find(".mejs-duration");media.addEventListener("timeupdate",function(){if(t.controlsAreVisible){player.updateDuration()}},false)},updateCurrent:function(){var t=this;var currentTime=t.media.currentTime;if(isNaN(currentTime)){currentTime=0}if(t.currenttime){t.currenttime.html(mejs.Utility.secondsToTimeCode(currentTime,t.options))}},updateDuration:function(){var t=this;var duration=t.media.duration;if(t.options.duration>0){duration=t.options.duration}if(isNaN(duration)){duration=0}t.container.toggleClass("mejs-long-video",duration>3600);if(t.durationD&&duration>0){t.durationD.html(mejs.Utility.secondsToTimeCode(duration,t.options))}}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{muteText:mejs.i18n.t("mejs.mute-toggle"),allyVolumeControlText:mejs.i18n.t("mejs.volume-help-text"),hideVolumeOnTouchDevices:true,audioVolume:"horizontal",videoVolume:"vertical"});$.extend(MediaElementPlayer.prototype,{buildvolume:function(player,controls,layers,media){if((mejs.MediaFeatures.isAndroid||mejs.MediaFeatures.isiOS)&&this.options.hideVolumeOnTouchDevices)return;var t=this,mode=t.isVideo?t.options.videoVolume:t.options.audioVolume,mute=mode=="horizontal"?$('<div class="mejs-button mejs-volume-button mejs-mute">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+"</div>"+'<a href="javascript:void(0);" class="mejs-horizontal-volume-slider">'+'<span class="mejs-offscreen">'+t.options.allyVolumeControlText+"</span>"+'<div class="mejs-horizontal-volume-total"></div>'+'<div class="mejs-horizontal-volume-current"></div>'+'<div class="mejs-horizontal-volume-handle"></div>'+"</a>").appendTo(controls):$('<div class="mejs-button mejs-volume-button mejs-mute">'+'<button type="button" aria-controls="'+t.id+'" title="'+t.options.muteText+'" aria-label="'+t.options.muteText+'"></button>'+'<a href="javascript:void(0);" class="mejs-volume-slider">'+'<span class="mejs-offscreen">'+t.options.allyVolumeControlText+"</span>"+'<div class="mejs-volume-total"></div>'+'<div class="mejs-volume-current"></div>'+'<div class="mejs-volume-handle"></div>'+"</a>"+"</div>").appendTo(controls),volumeSlider=t.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),volumeTotal=t.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),volumeCurrent=t.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),volumeHandle=t.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),positionVolumeHandle=function(volume,secondTry){if(!volumeSlider.is(":visible")&&typeof secondTry=="undefined"){volumeSlider.show();positionVolumeHandle(volume,true);volumeSlider.hide();return}volume=Math.max(0,volume);volume=Math.min(volume,1);if(volume===0){mute.removeClass("mejs-mute").addClass("mejs-unmute");mute.children("button").attr("title",mejs.i18n.t("mejs.unmute")).attr("aria-label",mejs.i18n.t("mejs.unmute"))}else{mute.removeClass("mejs-unmute").addClass("mejs-mute");mute.children("button").attr("title",mejs.i18n.t("mejs.mute")).attr("aria-label",mejs.i18n.t("mejs.mute"))}var totalPosition=volumeTotal.position();if(mode=="vertical"){var totalHeight=volumeTotal.height(),newTop=totalHeight-totalHeight*volume;volumeHandle.css("top",Math.round(totalPosition.top+newTop-volumeHandle.height()/2));volumeCurrent.height(totalHeight-newTop);volumeCurrent.css("top",totalPosition.top+newTop)}else{var totalWidth=volumeTotal.width(),newLeft=totalWidth*volume;volumeHandle.css("left",Math.round(totalPosition.left+newLeft-volumeHandle.width()/2));volumeCurrent.width(Math.round(newLeft))}},handleVolumeMove=function(e){var volume=null,totalOffset=volumeTotal.offset();if(mode==="vertical"){var railHeight=volumeTotal.height(),newY=e.pageY-totalOffset.top;volume=(railHeight-newY)/railHeight;if(totalOffset.top===0||totalOffset.left===0){return}}else{var railWidth=volumeTotal.width(),newX=e.pageX-totalOffset.left;volume=newX/railWidth}volume=Math.max(0,volume);volume=Math.min(volume,1);positionVolumeHandle(volume);if(volume===0){media.setMuted(true)}else{media.setMuted(false)}media.setVolume(volume)},mouseIsDown=false,mouseIsOver=false;mute.hover(function(){volumeSlider.show();mouseIsOver=true},function(){mouseIsOver=false;if(!mouseIsDown&&mode=="vertical"){volumeSlider.hide()}});var updateVolumeSlider=function(e){var volume=Math.floor(media.volume*100);volumeSlider.attr({"aria-label":mejs.i18n.t("mejs.volume-slider"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":volume,"aria-valuetext":volume+"%",role:"slider",tabindex:0})};volumeSlider.bind("mouseover",function(){mouseIsOver=true}).bind("mousedown",function(e){handleVolumeMove(e);t.globalBind("mousemove.vol",function(e){handleVolumeMove(e)});t.globalBind("mouseup.vol",function(){mouseIsDown=false;t.globalUnbind(".vol");if(!mouseIsOver&&mode=="vertical"){volumeSlider.hide()}});mouseIsDown=true;return false}).bind("keydown",function(e){var keyCode=e.keyCode;var volume=media.volume;switch(keyCode){case 38:volume=Math.min(volume+.1,1);break;case 40:volume=Math.max(0,volume-.1);break;default:return true}mouseIsDown=false;positionVolumeHandle(volume);media.setVolume(volume);return false});mute.find("button").click(function(){media.setMuted(!media.muted)});mute.find("button").bind("focus",function(){volumeSlider.show()});media.addEventListener("volumechange",function(e){if(!mouseIsDown){if(media.muted){positionVolumeHandle(0);mute.removeClass("mejs-mute").addClass("mejs-unmute")}else{positionVolumeHandle(media.volume);mute.removeClass("mejs-unmute").addClass("mejs-mute")}}updateVolumeSlider(e)},false);if(player.options.startVolume===0){media.setMuted(true)}if(media.pluginType==="native"){media.setVolume(player.options.startVolume)}t.container.on("controlsresize",function(){if(media.muted){positionVolumeHandle(0);mute.removeClass("mejs-mute").addClass("mejs-unmute")}else{positionVolumeHandle(media.volume);mute.removeClass("mejs-unmute").addClass("mejs-mute")}})}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{usePluginFullScreen:true,newWindowCallback:function(){return""},fullscreenText:""});$.extend(MediaElementPlayer.prototype,{isFullScreen:false,isNativeFullScreen:false,isInIframe:false,fullscreenMode:"",buildfullscreen:function(player,controls,layers,media){if(!player.isVideo)return;player.isInIframe=window.location!=window.parent.location;media.addEventListener("loadstart",function(){player.detectFullscreenMode()});var t=this,hideTimeout=null,fullscreenTitle=t.options.fullscreenText?t.options.fullscreenText:mejs.i18n.t("mejs.fullscreen"),fullscreenBtn=$('<div class="mejs-button mejs-fullscreen-button">'+'<button type="button" aria-controls="'+t.id+'" title="'+fullscreenTitle+'" aria-label="'+fullscreenTitle+'"></button>'+"</div>").appendTo(controls).on("click",function(){var isFullScreen=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||player.isFullScreen;if(isFullScreen){player.exitFullScreen()}else{player.enterFullScreen()}}).on("mouseover",function(){if(t.fullscreenMode=="plugin-hover"){if(hideTimeout!==null){clearTimeout(hideTimeout);delete hideTimeout}var buttonPos=fullscreenBtn.offset(),containerPos=player.container.offset();media.positionFullscreenButton(buttonPos.left-containerPos.left,buttonPos.top-containerPos.top,true)}}).on("mouseout",function(){if(t.fullscreenMode=="plugin-hover"){if(hideTimeout!==null){clearTimeout(hideTimeout);delete hideTimeout}hideTimeout=setTimeout(function(){media.hideFullscreenButton()},1500)}});player.fullscreenBtn=fullscreenBtn;t.globalBind("keydown",function(e){if(e.keyCode==27&&(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen)){player.exitFullScreen()}});t.normalHeight=0;t.normalWidth=0;if(mejs.MediaFeatures.hasTrueNativeFullScreen){var fullscreenChanged=function(e){if(player.isFullScreen){if(mejs.MediaFeatures.isFullScreen()){player.isNativeFullScreen=true;player.setControlsSize()}else{player.isNativeFullScreen=false;player.exitFullScreen()}}};player.globalBind(mejs.MediaFeatures.fullScreenEventName,fullscreenChanged)}},detectFullscreenMode:function(){var t=this,mode="",features=mejs.MediaFeatures;if(features.hasTrueNativeFullScreen&&t.media.pluginType==="native"){mode="native-native"}else if(features.hasTrueNativeFullScreen&&t.media.pluginType!=="native"&&!features.hasFirefoxPluginMovingProblem){mode="plugin-native"}else if(t.usePluginFullScreen){if(mejs.MediaFeatures.supportsPointerEvents){mode="plugin-click";t.createPluginClickThrough()}else{mode="plugin-hover"}}else{mode="fullwindow"}t.fullscreenMode=mode;return mode},isPluginClickThroughCreated:false,createPluginClickThrough:function(){var t=this;if(t.isPluginClickThroughCreated){return}var fullscreenIsDisabled=false,restoreControls=function(){if(fullscreenIsDisabled){for(var i in hoverDivs){hoverDivs[i].hide()}t.fullscreenBtn.css("pointer-events","");t.controls.css("pointer-events","");t.media.removeEventListener("click",t.clickToPlayPauseCallback);fullscreenIsDisabled=false}},hoverDivs={},hoverDivNames=["top","left","right","bottom"],i,len,positionHoverDivs=function(){var fullScreenBtnOffsetLeft=fullscreenBtn.offset().left-t.container.offset().left,fullScreenBtnOffsetTop=fullscreenBtn.offset().top-t.container.offset().top,fullScreenBtnWidth=fullscreenBtn.outerWidth(true),fullScreenBtnHeight=fullscreenBtn.outerHeight(true),containerWidth=t.container.width(),containerHeight=t.container.height();for(i in hoverDivs){hoverDivs[i].css({position:"absolute",top:0,left:0})}hoverDivs["top"].width(containerWidth).height(fullScreenBtnOffsetTop);hoverDivs["left"].width(fullScreenBtnOffsetLeft).height(fullScreenBtnHeight).css({top:fullScreenBtnOffsetTop});hoverDivs["right"].width(containerWidth-fullScreenBtnOffsetLeft-fullScreenBtnWidth).height(fullScreenBtnHeight).css({top:fullScreenBtnOffsetTop,left:fullScreenBtnOffsetLeft+fullScreenBtnWidth});hoverDivs["bottom"].width(containerWidth).height(containerHeight-fullScreenBtnHeight-fullScreenBtnOffsetTop).css({top:fullScreenBtnOffsetTop+fullScreenBtnHeight})};t.globalBind("resize",function(){positionHoverDivs()});for(i=0,len=hoverDivNames.length;i<len;i++){hoverDivs[hoverDivNames[i]]=$('<div class="mejs-fullscreen-hover" />').appendTo(t.container).mouseover(restoreControls).hide()}fullscreenBtn.on("mouseover",function(){if(!t.isFullScreen){var buttonPos=fullscreenBtn.offset(),containerPos=player.container.offset();media.positionFullscreenButton(buttonPos.left-containerPos.left,buttonPos.top-containerPos.top,false);t.fullscreenBtn.css("pointer-events","none");t.controls.css("pointer-events","none");t.media.addEventListener("click",t.clickToPlayPauseCallback);for(i in hoverDivs){hoverDivs[i].show()}positionHoverDivs();fullscreenIsDisabled=true}});media.addEventListener("fullscreenchange",function(e){t.isFullScreen=!t.isFullScreen;if(t.isFullScreen){t.media.removeEventListener("click",t.clickToPlayPauseCallback)}else{t.media.addEventListener("click",t.clickToPlayPauseCallback)}restoreControls()});t.globalBind("mousemove",function(e){if(fullscreenIsDisabled){var fullscreenBtnPos=fullscreenBtn.offset();if(e.pageY<fullscreenBtnPos.top||e.pageY>fullscreenBtnPos.top+fullscreenBtn.outerHeight(true)||e.pageX<fullscreenBtnPos.left||e.pageX>fullscreenBtnPos.left+fullscreenBtn.outerWidth(true)){fullscreenBtn.css("pointer-events","");t.controls.css("pointer-events","");fullscreenIsDisabled=false}}});t.isPluginClickThroughCreated=true},cleanfullscreen:function(player){player.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var t=this;if(mejs.MediaFeatures.isiOS&&mejs.MediaFeatures.hasiOSFullScreen&&typeof t.media.webkitEnterFullscreen==="function"){t.media.webkitEnterFullscreen();return}$(document.documentElement).addClass("mejs-fullscreen");t.normalHeight=t.container.height();t.normalWidth=t.container.width();if(t.fullscreenMode==="native-native"||t.fullscreenMode==="plugin-native"){mejs.MediaFeatures.requestFullScreen(t.container[0]);if(t.isInIframe){setTimeout(function checkFullscreen(){if(t.isNativeFullScreen){var percentErrorMargin=.002,windowWidth=$(window).width(),screenWidth=screen.width,absDiff=Math.abs(screenWidth-windowWidth),marginError=screenWidth*percentErrorMargin;if(absDiff>marginError){t.exitFullScreen()}else{setTimeout(checkFullscreen,500)}}},1e3)}}else if(t.fullscreeMode=="fullwindow"){}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%");t.containerSizeTimeout=setTimeout(function(){t.container.css({width:"100%",height:"100%"});t.setControlsSize()},500);if(t.media.pluginType==="native"){t.$media.width("100%").height("100%")}else{t.container.find(".mejs-shim").width("100%").height("100%");setTimeout(function(){var win=$(window),winW=win.width(),winH=win.height();t.media.setVideoSize(winW,winH)},500)}t.layers.children("div").width("100%").height("100%");if(t.fullscreenBtn){t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen")}t.setControlsSize();t.isFullScreen=true;var zoomFactor=Math.min(screen.width/t.width,screen.height/t.height);t.container.find(".mejs-captions-text").css("font-size",zoomFactor*100+"%");t.container.find(".mejs-captions-text").css("line-height","normal");t.container.find(".mejs-captions-position").css("bottom","45px");t.container.trigger("enteredfullscreen")},exitFullScreen:function(){var t=this;clearTimeout(t.containerSizeTimeout);if(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||t.isFullScreen)){mejs.MediaFeatures.cancelFullScreen()}$(document.documentElement).removeClass("mejs-fullscreen");t.container.removeClass("mejs-container-fullscreen").width(t.normalWidth).height(t.normalHeight);if(t.media.pluginType==="native"){t.$media.width(t.normalWidth).height(t.normalHeight)}else{t.container.find(".mejs-shim").width(t.normalWidth).height(t.normalHeight);t.media.setVideoSize(t.normalWidth,t.normalHeight)}t.layers.children("div").width(t.normalWidth).height(t.normalHeight);t.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen");t.setControlsSize();t.isFullScreen=false;t.container.find(".mejs-captions-text").css("font-size","");t.container.find(".mejs-captions-text").css("line-height","");t.container.find(".mejs-captions-position").css("bottom","");t.container.trigger("exitedfullscreen")}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{speeds:["2.00","1.50","1.25","1.00","0.75"],defaultSpeed:"1.00",speedChar:"x"});$.extend(MediaElementPlayer.prototype,{buildspeed:function(player,controls,layers,media){var t=this;if(t.media.pluginType=="native"){var speedButton=null,speedSelector=null,playbackSpeed=null,inputId=null;var speeds=[];var defaultInArray=false;for(var i=0,len=t.options.speeds.length;i<len;i++){var s=t.options.speeds[i];if(typeof s==="string"){speeds.push({name:s+t.options.speedChar,value:s});if(s===t.options.defaultSpeed){defaultInArray=true}}else{speeds.push(s);if(s.value===t.options.defaultSpeed){defaultInArray=true}}}if(!defaultInArray){speeds.push({name:t.options.defaultSpeed+t.options.speedChar,value:t.options.defaultSpeed})}speeds.sort(function(a,b){return parseFloat(b.value)-parseFloat(a.value)});var getSpeedNameFromValue=function(value){for(i=0,len=speeds.length;i<len;i++){if(speeds[i].value===value){return speeds[i].name}}};var html='<div class="mejs-button mejs-speed-button">'+'<button type="button">'+getSpeedNameFromValue(t.options.defaultSpeed)+"</button>"+'<div class="mejs-speed-selector">'+"<ul>";for(i=0,il=speeds.length;i<il;i++){inputId=t.id+"-speed-"+speeds[i].value;html+="<li>"+'<input type="radio" name="speed" '+'value="'+speeds[i].value+'" '+'id="'+inputId+'" '+(speeds[i].value===t.options.defaultSpeed?" checked":"")+" />"+'<label for="'+inputId+'" '+(speeds[i].value===t.options.defaultSpeed?' class="mejs-speed-selected"':"")+">"+speeds[i].name+"</label>"+"</li>"}html+="</ul></div></div>";speedButton=$(html).appendTo(controls);speedSelector=speedButton.find(".mejs-speed-selector");playbackSpeed=t.options.defaultSpeed;media.addEventListener("loadedmetadata",function(e){if(playbackSpeed){media.playbackRate=parseFloat(playbackSpeed)}},true);speedSelector.on("click",'input[type="radio"]',function(){var newSpeed=$(this).attr("value");playbackSpeed=newSpeed;media.playbackRate=parseFloat(newSpeed);speedButton.find("button").html(getSpeedNameFromValue(newSpeed));speedButton.find(".mejs-speed-selected").removeClass("mejs-speed-selected");speedButton.find('input[type="radio"]:checked').next().addClass("mejs-speed-selected")});speedButton.one("mouseenter focusin",function(){speedSelector.height(speedButton.find(".mejs-speed-selector ul").outerHeight(true)+speedButton.find(".mejs-speed-translations").outerHeight(true)).css("top",-1*speedSelector.height()+"px")})}}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{startLanguage:"",tracksText:"",tracksAriaLive:false,hideCaptionsButtonWhenEmpty:true,toggleCaptionsButtonWhenOnlyOne:false,slidesSelector:""});$.extend(MediaElementPlayer.prototype,{hasChapters:false,cleartracks:function(player,controls,layers,media){if(player){if(player.captions)player.captions.remove();if(player.chapters)player.chapters.remove();if(player.captionsText)player.captionsText.remove();if(player.captionsButton)player.captionsButton.remove()}},buildtracks:function(player,controls,layers,media){if(player.tracks.length===0)return;var t=this,attr=t.options.tracksAriaLive?'role="log" aria-live="assertive" aria-atomic="false"':"",tracksTitle=t.options.tracksText?t.options.tracksText:mejs.i18n.t("mejs.captions-subtitles"),i,kind;if(t.domNode.textTracks){for(i=t.domNode.textTracks.length-1;i>=0;i--){t.domNode.textTracks[i].mode="hidden"}}t.cleartracks(player,controls,layers,media);player.chapters=$('<div class="mejs-chapters mejs-layer"></div>').prependTo(layers).hide();player.captions=$('<div class="mejs-captions-layer mejs-layer"><div class="mejs-captions-position mejs-captions-position-hover" '+attr+'><span class="mejs-captions-text"></span></div></div>').prependTo(layers).hide();player.captionsText=player.captions.find(".mejs-captions-text");player.captionsButton=$('<div class="mejs-button mejs-captions-button">'+'<button type="button" aria-controls="'+t.id+'" title="'+tracksTitle+'" aria-label="'+tracksTitle+'"></button>'+'<div class="mejs-captions-selector">'+"<ul>"+"<li>"+'<input type="radio" name="'+player.id+'_captions" id="'+player.id+'_captions_none" value="none" checked="checked" />'+'<label for="'+player.id+'_captions_none">'+mejs.i18n.t("mejs.none")+"</label>"+"</li>"+"</ul>"+"</div>"+"</div>").appendTo(controls);var subtitleCount=0;for(i=0;i<player.tracks.length;i++){kind=player.tracks[i].kind;if(kind==="subtitles"||kind==="captions"){subtitleCount++}}if(t.options.toggleCaptionsButtonWhenOnlyOne&&subtitleCount==1){player.captionsButton.on("click",function(){if(player.selectedTrack===null){lang=player.tracks[0].srclang}else{lang="none"}player.setTrack(lang)})}else{player.captionsButton.on("mouseenter focusin",function(){$(this).find(".mejs-captions-selector").removeClass("mejs-offscreen")}).on("click","input[type=radio]",function(){lang=this.value;player.setTrack(lang)});player.captionsButton.on("mouseleave focusout",function(){$(this).find(".mejs-captions-selector").addClass("mejs-offscreen")})}if(!player.options.alwaysShowControls){player.container.bind("controlsshown",function(){player.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}).bind("controlshidden",function(){if(!media.paused){player.container.find(".mejs-captions-position").removeClass("mejs-captions-position-hover")}})}else{player.container.find(".mejs-captions-position").addClass("mejs-captions-position-hover")}player.trackToLoad=-1;player.selectedTrack=null;player.isLoadingTrack=false;for(i=0;i<player.tracks.length;i++){kind=player.tracks[i].kind;if(kind==="subtitles"||kind==="captions"){player.addTrackButton(player.tracks[i].srclang,player.tracks[i].label)}}player.loadNextTrack();media.addEventListener("timeupdate",function(){player.displayCaptions()},false);if(player.options.slidesSelector!==""){player.slidesContainer=$(player.options.slidesSelector);media.addEventListener("timeupdate",function(){player.displaySlides()},false)}media.addEventListener("loadedmetadata",function(){player.displayChapters()},false);player.container.hover(function(){if(player.hasChapters){player.chapters.removeClass("mejs-offscreen");player.chapters.fadeIn(200).height(player.chapters.find(".mejs-chapter").outerHeight())}},function(){if(player.hasChapters&&!media.paused){player.chapters.fadeOut(200,function(){$(this).addClass("mejs-offscreen");$(this).css("display","block")})}});t.container.on("controlsresize",function(){t.adjustLanguageBox()});if(player.node.getAttribute("autoplay")!==null){player.chapters.addClass("mejs-offscreen")}},setTrack:function(lang){var t=this,i;if(lang=="none"){t.selectedTrack=null;t.captionsButton.removeClass("mejs-captions-enabled")}else{for(i=0;i<t.tracks.length;i++){if(t.tracks[i].srclang==lang){if(t.selectedTrack===null)t.captionsButton.addClass("mejs-captions-enabled");t.selectedTrack=t.tracks[i];t.captions.attr("lang",t.selectedTrack.srclang);t.displayCaptions();break}}}},loadNextTrack:function(){var t=this;t.trackToLoad++;if(t.trackToLoad<t.tracks.length){t.isLoadingTrack=true;t.loadTrack(t.trackToLoad)}else{t.isLoadingTrack=false;t.checkForTracks()}},loadTrack:function(index){var t=this,track=t.tracks[index],after=function(){track.isLoaded=true;t.enableTrackButton(track.srclang,track.label);t.loadNextTrack()};if(track.src!==undefined||track.src!==""){$.ajax({url:track.src,dataType:"text",success:function(d){if(typeof d=="string"&&/<tt\s+xml/gi.exec(d)){track.entries=mejs.TrackFormatParser.dfxp.parse(d)}else{track.entries=mejs.TrackFormatParser.webvtt.parse(d)}after();if(track.kind=="chapters"){t.media.addEventListener("play",function(){if(t.media.duration>0){t.displayChapters(track)}},false)}if(track.kind=="slides"){t.setupSlides(track)}},error:function(){t.removeTrackButton(track.srclang);t.loadNextTrack()}})}},enableTrackButton:function(lang,label){var t=this;if(label===""){label=mejs.language.codes[lang]||lang}t.captionsButton.find("input[value="+lang+"]").prop("disabled",false).siblings("label").html(label);if(t.options.startLanguage==lang){$("#"+t.id+"_captions_"+lang).prop("checked",true).trigger("click")}t.adjustLanguageBox()},removeTrackButton:function(lang){var t=this;t.captionsButton.find("input[value="+lang+"]").closest("li").remove();t.adjustLanguageBox()},addTrackButton:function(lang,label){var t=this;if(label===""){label=mejs.language.codes[lang]||lang}t.captionsButton.find("ul").append($("<li>"+'<input type="radio" name="'+t.id+'_captions" id="'+t.id+"_captions_"+lang+'" value="'+lang+'" disabled="disabled" />'+'<label for="'+t.id+"_captions_"+lang+'">'+label+" (loading)"+"</label>"+"</li>"));t.adjustLanguageBox();t.container.find(".mejs-captions-translations option[value="+lang+"]").remove()},adjustLanguageBox:function(){var t=this;t.captionsButton.find(".mejs-captions-selector").height(t.captionsButton.find(".mejs-captions-selector ul").outerHeight(true)+t.captionsButton.find(".mejs-captions-translations").outerHeight(true))},checkForTracks:function(){var t=this,hasSubtitles=false;if(t.options.hideCaptionsButtonWhenEmpty){for(var i=0;i<t.tracks.length;i++){var kind=t.tracks[i].kind;if((kind==="subtitles"||kind==="captions")&&t.tracks[i].isLoaded){hasSubtitles=true;break}}if(!hasSubtitles){t.captionsButton.hide();t.setControlsSize()}}},displayCaptions:function(){if(typeof this.tracks=="undefined")return;var t=this,i,track=t.selectedTrack;if(track!==null&&track.isLoaded){for(i=0;i<track.entries.times.length;i++){if(t.media.currentTime>=track.entries.times[i].start&&t.media.currentTime<=track.entries.times[i].stop){t.captionsText.html(track.entries.text[i]).attr("class","mejs-captions-text "+(track.entries.times[i].identifier||""));t.captions.show().height(0);return}}t.captions.hide()}else{t.captions.hide()}},setupSlides:function(track){var t=this;t.slides=track;t.slides.entries.imgs=[t.slides.entries.text.length];t.showSlide(0)},showSlide:function(index){if(typeof this.tracks=="undefined"||typeof this.slidesContainer=="undefined"){return}var t=this,url=t.slides.entries.text[index],img=t.slides.entries.imgs[index];if(typeof img=="undefined"||typeof img.fadeIn=="undefined"){t.slides.entries.imgs[index]=img=$('<img src="'+url+'">').on("load",function(){img.appendTo(t.slidesContainer).hide().fadeIn().siblings(":visible").fadeOut()})}else{if(!img.is(":visible")&&!img.is(":animated")){img.fadeIn().siblings(":visible").fadeOut()}}},displaySlides:function(){if(typeof this.slides=="undefined")return;var t=this,slides=t.slides,i;for(i=0;i<slides.entries.times.length;i++){if(t.media.currentTime>=slides.entries.times[i].start&&t.media.currentTime<=slides.entries.times[i].stop){t.showSlide(i);return}}},displayChapters:function(){var t=this,i;for(i=0;i<t.tracks.length;i++){if(t.tracks[i].kind=="chapters"&&t.tracks[i].isLoaded){t.drawChapters(t.tracks[i]);t.hasChapters=true;break}}},drawChapters:function(chapters){var t=this,i,dur,percent=0,usedPercent=0;t.chapters.empty();for(i=0;i<chapters.entries.times.length;i++){dur=chapters.entries.times[i].stop-chapters.entries.times[i].start;percent=Math.floor(dur/t.media.duration*100);if(percent+usedPercent>100||i==chapters.entries.times.length-1&&percent+usedPercent<100){percent=100-usedPercent}t.chapters.append($('<div class="mejs-chapter" rel="'+chapters.entries.times[i].start+'" style="left: '+usedPercent.toString()+"%;width: "+percent.toString()+'%;">'+'<div class="mejs-chapter-block'+(i==chapters.entries.times.length-1?" mejs-chapter-block-last":"")+'">'+'<span class="ch-title">'+chapters.entries.text[i]+"</span>"+'<span class="ch-time">'+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].start,t.options)+"&ndash;"+mejs.Utility.secondsToTimeCode(chapters.entries.times[i].stop,t.options)+"</span>"+"</div>"+"</div>"));usedPercent+=percent}t.chapters.find("div.mejs-chapter").click(function(){t.media.setCurrentTime(parseFloat($(this).attr("rel")));if(t.media.paused){t.media.play()}});t.chapters.show()}});mejs.language={codes:{af:"Afrikaans",sq:"Albanian",ar:"Arabic",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",zh:"Chinese","zh-cn":"Chinese Simplified","zh-tw":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fl:"Filipino",fi:"Finnish",fr:"French",gl:"Galician",de:"German",el:"Greek",ht:"Haitian Creole",iw:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",ko:"Korean",lv:"Latvian",lt:"Lithuanian",mk:"Macedonian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sl:"Slovenian",es:"Spanish",sw:"Swahili",sv:"Swedish",tl:"Tagalog",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",cy:"Welsh",yi:"Yiddish"}};mejs.TrackFormatParser={webvtt:{pattern_timecode:/^((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{1,3})?) --\> ((?:[0-9]{1,2}:)?[0-9]{2}:[0-9]{2}([,.][0-9]{3})?)(.*)$/,parse:function(trackText){var i=0,lines=mejs.TrackFormatParser.split2(trackText,/\r?\n/),entries={text:[],times:[]},timecode,text,identifier;for(;i<lines.length;i++){timecode=this.pattern_timecode.exec(lines[i]);if(timecode&&i<lines.length){if(i-1>=0&&lines[i-1]!==""){identifier=lines[i-1]}i++;text=lines[i];i++;while(lines[i]!==""&&i<lines.length){text=text+"\n"+lines[i];i++}text=$.trim(text).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>");entries.text.push(text);entries.times.push({identifier:identifier,start:mejs.Utility.convertSMPTEtoSeconds(timecode[1])===0?.2:mejs.Utility.convertSMPTEtoSeconds(timecode[1]),stop:mejs.Utility.convertSMPTEtoSeconds(timecode[3]),settings:timecode[5]})}identifier=""}return entries}},dfxp:{parse:function(trackText){trackText=$(trackText).filter("tt");var i=0,container=trackText.children("div").eq(0),lines=container.find("p"),styleNode=trackText.find("#"+container.attr("style")),styles,text,entries={text:[],times:[]};if(styleNode.length){var attributes=styleNode.removeAttr("id").get(0).attributes;if(attributes.length){styles={};for(i=0;i<attributes.length;i++){styles[attributes[i].name.split(":")[1]]=attributes[i].value}}}for(i=0;i<lines.length;i++){var style;var _temp_times={start:null,stop:null,style:null};if(lines.eq(i).attr("begin"))_temp_times.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("begin"));if(!_temp_times.start&&lines.eq(i-1).attr("end"))_temp_times.start=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i-1).attr("end"));if(lines.eq(i).attr("end"))_temp_times.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i).attr("end"));if(!_temp_times.stop&&lines.eq(i+1).attr("begin"))_temp_times.stop=mejs.Utility.convertSMPTEtoSeconds(lines.eq(i+1).attr("begin"));if(styles){style="";for(var _style in styles){style+=_style+":"+styles[_style]+";"}}if(style)_temp_times.style=style;if(_temp_times.start===0)_temp_times.start=.2;entries.times.push(_temp_times);text=$.trim(lines.eq(i).html()).replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target='_blank'>$1</a>");entries.text.push(text)}return entries}},split2:function(text,regex){return text.split(regex)}};if("x\n\ny".split(/\n/gi).length!=3){mejs.TrackFormatParser.split2=function(text,regex){var parts=[],chunk="",i;for(i=0;i<text.length;i++){chunk+=text.substring(i,i+1);if(regex.test(chunk)){parts.push(chunk.replace(regex,""));chunk=""}}parts.push(chunk);return parts}}})(mejs.$);(function($){$.extend(mejs.MepDefaults,{sourcechooserText:""});$.extend(MediaElementPlayer.prototype,{buildsourcechooser:function(player,controls,layers,media){var t=this,sourceTitle=t.options.sourcechooserText?t.options.sourcechooserText:mejs.i18n.t("mejs.source-chooser"),hoverTimeout;player.sourcechooserButton=$('<div class="mejs-button mejs-sourcechooser-button">'+'<button type="button" role="button" aria-haspopup="true" aria-owns="'+t.id+'" title="'+sourceTitle+'" aria-label="'+sourceTitle+'"></button>'+'<div class="mejs-sourcechooser-selector mejs-offscreen" role="menu" aria-expanded="false" aria-hidden="true">'+"<ul>"+"</ul>"+"</div>"+"</div>").appendTo(controls).hover(function(){clearTimeout(hoverTimeout);player.showSourcechooserSelector()},function(){var self=$(this);hoverTimeout=setTimeout(function(){player.hideSourcechooserSelector()},500)}).on("keydown",function(e){var keyCode=e.keyCode;switch(keyCode){case 32:if(!mejs.MediaFeatures.isFirefox){player.showSourcechooserSelector()}$(this).find(".mejs-sourcechooser-selector").find("input[type=radio]:checked").first().focus();break;case 13:player.showSourcechooserSelector();$(this).find(".mejs-sourcechooser-selector").find("input[type=radio]:checked").first().focus();break;case 27:player.hideSourcechooserSelector();$(this).find("button").focus();break;default:return true}}).on("focusout",mejs.Utility.debounce(function(e){setTimeout(function(){var parent=$(document.activeElement).closest(".mejs-sourcechooser-selector");if(!parent.length){player.hideSourcechooserSelector()}},0)},100)).delegate("input[type=radio]","click",function(){$(this).attr("aria-selected",true).attr("checked","checked");$(this).closest(".mejs-sourcechooser-selector").find("input[type=radio]").not(this).attr("aria-selected","false").removeAttr("checked");var src=this.value;if(media.currentSrc!=src){var currentTime=media.currentTime;var paused=media.paused;media.pause();media.setSrc(src);media.addEventListener("loadedmetadata",function(e){media.currentTime=currentTime},true);var canPlayAfterSourceSwitchHandler=function(e){if(!paused){media.play()}media.removeEventListener("canplay",canPlayAfterSourceSwitchHandler,true)};media.addEventListener("canplay",canPlayAfterSourceSwitchHandler,true);media.load()}}).delegate("button","click",function(e){if($(this).siblings(".mejs-sourcechooser-selector").hasClass("mejs-offscreen")){player.showSourcechooserSelector();$(this).siblings(".mejs-sourcechooser-selector").find("input[type=radio]:checked").first().focus()}else{player.hideSourcechooserSelector()}});for(var i in this.node.children){var src=this.node.children[i];if(src.nodeName==="SOURCE"&&(media.canPlayType(src.type)=="probably"||media.canPlayType(src.type)=="maybe")){player.addSourceButton(src.src,src.title,src.type,media.src==src.src)}}},addSourceButton:function(src,label,type,isCurrent){var t=this;if(label===""||label==undefined){label=src}type=type.split("/")[1];t.sourcechooserButton.find("ul").append($("<li>"+'<input type="radio" name="'+t.id+'_sourcechooser" id="'+t.id+"_sourcechooser_"+label+type+'" role="menuitemradio" value="'+src+'" '+(isCurrent?'checked="checked"':"")+'aria-selected="'+isCurrent+'"'+" />"+'<label for="'+t.id+"_sourcechooser_"+label+type+'" aria-hidden="true">'+label+" ("+type+")</label>"+"</li>"));t.adjustSourcechooserBox()},adjustSourcechooserBox:function(){var t=this;t.sourcechooserButton.find(".mejs-sourcechooser-selector").height(t.sourcechooserButton.find(".mejs-sourcechooser-selector ul").outerHeight(true))},hideSourcechooserSelector:function(){this.sourcechooserButton.find(".mejs-sourcechooser-selector").addClass("mejs-offscreen").attr("aria-expanded","false").attr("aria-hidden","true").find("input[type=radio]").attr("tabindex","-1")},showSourcechooserSelector:function(){this.sourcechooserButton.find(".mejs-sourcechooser-selector").removeClass("mejs-offscreen").attr("aria-expanded","true").attr("aria-hidden","false").find("input[type=radio]").attr("tabindex","0")}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{contextMenuItems:[{render:function(player){if(typeof player.enterFullScreen=="undefined")return null;if(player.isFullScreen){return mejs.i18n.t("mejs.fullscreen-off")}else{return mejs.i18n.t("mejs.fullscreen-on")}},click:function(player){if(player.isFullScreen){player.exitFullScreen()}else{player.enterFullScreen()}}},{render:function(player){if(player.media.muted){return mejs.i18n.t("mejs.unmute")}else{return mejs.i18n.t("mejs.mute")}},click:function(player){if(player.media.muted){player.setMuted(false)}else{player.setMuted(true)}}},{isSeparator:true},{render:function(player){return mejs.i18n.t("mejs.download-video")},click:function(player){window.location.href=player.media.currentSrc}}]});$.extend(MediaElementPlayer.prototype,{buildcontextmenu:function(player,controls,layers,media){player.contextMenu=$('<div class="mejs-contextmenu"></div>').appendTo($("body")).hide();player.container.bind("contextmenu",function(e){if(player.isContextMenuEnabled){e.preventDefault();player.renderContextMenu(e.clientX-1,e.clientY-1);return false}});player.container.bind("click",function(){player.contextMenu.hide()});player.contextMenu.bind("mouseleave",function(){player.startContextMenuTimer()})},cleancontextmenu:function(player){player.contextMenu.remove()},isContextMenuEnabled:true,enableContextMenu:function(){this.isContextMenuEnabled=true},disableContextMenu:function(){this.isContextMenuEnabled=false},contextMenuTimeout:null,startContextMenuTimer:function(){var t=this;t.killContextMenuTimer();t.contextMenuTimer=setTimeout(function(){t.hideContextMenu();t.killContextMenuTimer()},750)},killContextMenuTimer:function(){var timer=this.contextMenuTimer;if(timer!=null){clearTimeout(timer);delete timer;timer=null}},hideContextMenu:function(){this.contextMenu.hide()},renderContextMenu:function(x,y){var t=this,html="",items=t.options.contextMenuItems;for(var i=0,il=items.length;i<il;i++){if(items[i].isSeparator){html+='<div class="mejs-contextmenu-separator"></div>'}else{var rendered=items[i].render(t);if(rendered!=null){html+='<div class="mejs-contextmenu-item" data-itemindex="'+i+'" id="element-'+Math.random()*1e6+'">'+rendered+"</div>"}}}t.contextMenu.empty().append($(html)).css({top:y,left:x}).show();t.contextMenu.find(".mejs-contextmenu-item").each(function(){var $dom=$(this),itemIndex=parseInt($dom.data("itemindex"),10),item=t.options.contextMenuItems[itemIndex];if(typeof item.show!="undefined")item.show($dom,t);$dom.click(function(){if(typeof item.click!="undefined")item.click(t);t.contextMenu.hide()})});setTimeout(function(){t.killControlsTimer("rev3")},100)}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{skipBackInterval:30,skipBackText:""});$.extend(MediaElementPlayer.prototype,{buildskipback:function(player,controls,layers,media){var t=this,defaultTitle=mejs.i18n.t("mejs.time-skip-back",t.options.skipBackInterval),skipTitle=t.options.skipBackText?t.options.skipBackText:defaultTitle,loop=$('<div class="mejs-button mejs-skip-back-button">'+'<button type="button" aria-controls="'+t.id+'" title="'+skipTitle+'" aria-label="'+skipTitle+'">'+t.options.skipBackInterval+"</button>"+"</div>").appendTo(controls).click(function(){media.setCurrentTime(Math.max(media.currentTime-t.options.skipBackInterval,0));$(this).find("button").blur()})}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{postrollCloseText:""});$.extend(MediaElementPlayer.prototype,{buildpostroll:function(player,controls,layers,media){var t=this,postrollTitle=t.options.postrollCloseText?t.options.postrollCloseText:mejs.i18n.t("mejs.close"),postrollLink=t.container.find('link[rel="postroll"]').attr("href");if(typeof postrollLink!=="undefined"){player.postroll=$('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="$(this).parent().hide();return false;">'+postrollTitle+'</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(layers).hide();t.media.addEventListener("ended",function(e){$.ajax({dataType:"html",url:postrollLink,success:function(data,textStatus){layers.find(".mejs-postroll-layer-content").html(data)}});player.postroll.show()},false)}}})})(mejs.$);(function($){$.extend(mejs.MepDefaults,{markerColor:"#E9BC3D",markers:[],markerCallback:function(){}});$.extend(MediaElementPlayer.prototype,{buildmarkers:function(player,controls,layers,media){var t=this,i=0,currentPos=-1,currentMarker=-1,lastPlayPos=-1,lastMarkerCallBack=-1;for(i=0;i<player.options.markers.length;++i){controls.find(".mejs-time-total").append('<span class="mejs-time-marker"></span>')}media.addEventListener("durationchange",function(e){player.setmarkers(controls)});media.addEventListener("timeupdate",function(e){currentPos=Math.floor(media.currentTime);if(lastPlayPos>currentPos){if(lastMarkerCallBack>currentPos){lastMarkerCallBack=-1}}else{lastPlayPos=currentPos}for(i=0;i<player.options.markers.length;++i){currentMarker=Math.floor(player.options.markers[i]);if(currentPos===currentMarker&&currentMarker!==lastMarkerCallBack){player.options.markerCallback(media,media.currentTime);lastMarkerCallBack=currentMarker}}},false)},setmarkers:function(controls){var t=this,i=0,left;for(i=0;i<t.options.markers.length;++i){if(Math.floor(t.options.markers[i])<=t.media.duration&&Math.floor(t.options.markers[i])>=0){left=100*Math.floor(t.options.markers[i])/t.media.duration;$(controls.find(".mejs-time-marker")[i]).css({width:"1px",left:left+"%",background:t.options.markerColor})}}}})})(mejs.$);